(function(){"use strict";var e={7173:function(e,t,a){var s=a(9242),r=a(3396);function o(e,t,a,o,n,i){const l=(0,r.up)("router-view"),c=(0,r.up)("ErrorFetch");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(l),(0,r.wy)((0,r.Wm)(c,{errorMessage:e.appError},null,8,["errorMessage"]),[[s.F8,e.appError.length>0]])],64)}var n=a(65),i=a(7139);const l={class:"fixed-bottom alert-danger w-100 py-3 text-center"};function c(e,t,a,s,o,n){return(0,r.wg)(),(0,r.iD)("div",l,(0,i.zw)(a.errorMessage),1)}var d={props:{errorMessage:String}},u=a(89);const p=(0,u.Z)(d,[["render",c]]);var h=p,m={data(){return{}},components:{ErrorFetch:h},computed:{...(0,n.rn)(["appError"])}};const g=(0,u.Z)(m,[["render",o]]);var f=g,v=a(678);const _=e=>((0,r.dD)("data-v-7a174a0f"),e=e(),(0,r.Cn)(),e),b={class:"form-group"},w=_((()=>(0,r._)("label",{class:"h6",for:"exampleInputEmail1"},"Email address",-1))),y=_((()=>(0,r._)("br",null,null,-1))),k={class:"btn-ingresar border-0 text-white w-100 py-2",type:"submit"},x=(0,r.Uk)(" Iniciar sesión ");function D(e,t,a,o,n,l){return(0,r.wg)(),(0,r.iD)("form",{class:"m-auto mt-5 p-4 card d-flex flex-column justify-content-between",onSubmit:t[1]||(t[1]=(0,s.iM)(((...e)=>l.validate&&l.validate(...e)),["prevent"]))},[(0,r._)("div",b,[w,(0,r.wy)((0,r._)("input",{name:"email",type:"email",class:"form-control",placeholder:"Enter email","onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e),required:""},null,512),[[s.nr,n.name]]),n.isFetch?((0,r.wg)(),(0,r.iD)("small",{key:0,class:(0,i.C_)(["emailHelp form-text",n.userExist&&n.isFetch?"":"text-danger"])},(0,i.zw)(n.userExist&&n.isFetch?"":"Correo desconocido"),3)):(0,r.kq)("",!0)]),y,(0,r._)("button",k,[(0,r._)("span",{class:(0,i.C_)(["spinner-border spinner-border-sm mx-1",n.spinnerButton?"":"d-none"]),role:"status","aria-hidden":"true"},null,2),x])],32)}var S={name:"LoginView",data(){return{name:"",userExist:!1,isFetch:!1,spinnerButton:!1}},methods:{...(0,n.OI)(["setAppError"]),async signin(){try{this.spinnerButton=!0;const e="http://srv515666.hstgr.cloud:4001/server-user/signin";let t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.name})}),a=await t.json();if(a.error)throw a;return a}catch(e){let t=e.statusText||`Error de Front: Al iniciar sesion: ${e}`;this.setAppError(t)}},async validate(){let e=await this.signin();this.isFetch=!0,"undefined"!==typeof e&&("success"==e.status&&(this.userExist=!0,localStorage.setItem("token_user",e.data.token),this.$router.push({name:"tracking"})),this.spinnerButton=!1)},async initialUsers(){try{const e="http://srv515666.hstgr.cloud:4001/server-user/initial";let t=await fetch(e,{method:"POST"}),a=await t.json();if(a.error)throw a;return a}catch(e){let t=e.statusText||`Error de Front: Al iniciar usuarios de Two en Apal: ${e}`;this.setAppError(t)}}},async mounted(){await this.initialUsers()}};const E=(0,u.Z)(S,[["render",D],["__scopeId","data-v-7a174a0f"]]);var C=E;const A=e=>((0,r.dD)("data-v-d5c91104"),e=e(),(0,r.Cn)(),e),T={class:"container d-flex flex-column container-tracking position-relative"},F=(0,r.Uk)("Login"),M={key:2,class:"dashboard h-100"},I=A((()=>(0,r._)("br",null,null,-1))),z=A((()=>(0,r._)("br",null,null,-1)));function O(e,t,a,s,o,n){const l=(0,r.up)("DashMenu"),c=(0,r.up)("StepperModal"),d=(0,r.up)("router-link"),u=(0,r.up)("DashTop"),p=(0,r.up)("DashStatistics"),h=(0,r.up)("DashEmpty"),m=(0,r.up)("DashTrackin");return(0,r.wg)(),(0,r.iD)("div",{"data-container-menu":"",class:(0,i.C_)(o.isFetch&&o.tracking.length>0?"bg-gray":"")},[(0,r.Wm)(l),(0,r.Wm)(c),(0,r._)("div",T,[(0,r.Wm)(d,{class:"back-button d-block pt-2 pb-1 h6",to:{name:"login"}},{default:(0,r.w5)((()=>[F])),_:1}),(0,r.Wm)(u,{totalVehicles:this.tracking.length,onError:e.emitError},null,8,["totalVehicles","onError"]),o.isFetch&&o.tracking.length>0?((0,r.wg)(),(0,r.j4)(p,{key:0,tracking:o.tracking},null,8,["tracking"])):(0,r.kq)("",!0),o.isFetch&&0==o.tracking.length?((0,r.wg)(),(0,r.j4)(h,{key:1})):((0,r.wg)(),(0,r.iD)("div",M,[I,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.tracking,(e=>((0,r.wg)(),(0,r.j4)(m,{key:e.placa,data:e},null,8,["data"])))),128)),z]))])],2)}function j(e,t,a,s,o,n){const i=(0,r.up)("Menu2");return(0,r.wg)(),(0,r.j4)(i,{options:o.optionsMenu},null,8,["options"])}const R=["data-target","onClick"],N={for:"",class:"my-0"};function U(e,t,a,s,o,n){return(0,r.wg)(),(0,r.iD)("div",{ref:"menu",class:(0,i.C_)(["menu d-flex flex-column justify-content-between",o.visible?n.showMenu(o.coords):"invisible"])},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.options,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"option","data-toggle":"modal","data-target":e.open,onClick:e.action,key:t},[(0,r._)("i",{class:(0,i.C_)(e.iconClass)},null,2),(0,r._)("label",N,(0,i.zw)(e.name),1)],8,R)))),128))],2)}var W={name:"MenuContext",props:["options"],data(){return{visible:!1,coords:{}}},methods:{activeMenu(e){this.coords={x:e.clientX,y:e.clientY},this.visible=!0},showMenu(e){this.$refs.menu.style.transform=`translate(${e.x}px,${e.y}px)`}},mounted(){const e=document.querySelector("[data-container-menu]");e.addEventListener("click",(()=>{this.visible=!1})),e.addEventListener("contextmenu",(e=>{e.preventDefault(),this.activeMenu(e)}))}};const L=(0,u.Z)(W,[["render",U],["__scopeId","data-v-4c6c6713"]]);var V=L,B={props:["coords"],components:{Menu2:V},data(){return{optionsMenu:[{open:"#modalStepper",iconClass:"fa-solid fa-upload",name:"Importar"},{action:()=>{this.$router.push({name:"routes-table"})},iconClass:"fa-solid fa-route",name:"Rutas"},{action:()=>{},iconClass:"fa-brands fa-guilded",name:"Guias"},{action:()=>{},iconClass:"fa-solid fa-truck",name:"Flota"},{action:()=>{this.$router.push({name:"graphic"})},iconClass:"fa-solid fa-chart-line",name:"Estadisticas"},{action:()=>{},iconClass:"fa-solid fa-bell",name:"Alertas"},{action:()=>{},iconClass:"fa-solid fa-users",name:"Clientes"},{action:()=>{this.$router.push({name:"groups"})},iconClass:"fa-solid fa-gear",name:"Configuracion"}]}},methods:{gotToPage(e){this.$router.push({name:e})}}};const P=(0,u.Z)(B,[["render",j]]);var Z=P;const $=e=>((0,r.dD)("data-v-04f50c24"),e=e(),(0,r.Cn)(),e),G={class:"dash-top d-flex justify-content-between align-items-center mb-2"},H={class:"d-flex align-items-center"},Y={class:"mt-2 mx-2"},K=$((()=>(0,r._)("h6",{class:"mt-2"},"Vehiculos",-1))),q={"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Ultima importacion",class:"mx-3"},J={class:"badge badge-dark font-weight-light"};function X(e,t,a,o,n,l){return(0,r.wg)(),(0,r.iD)("div",G,[(0,r._)("div",H,[(0,r._)("h6",Y,"["+(0,i.zw)(a.totalVehicles)+"]",1),K]),(0,r.wy)((0,r._)("div",q,[(0,r._)("small",J,(0,i.zw)(n.loadDate),1)],512),[[s.F8,n.loadDate]])])}var Q={props:["totalVehicles"],data(){return{token:localStorage.getItem("token_user"),loadDate:null}},methods:{...(0,n.OI)(["setAppError"]),async getLastLoad(){try{let e=await fetch("http://srv515666.hstgr.cloud:4001/server-user/loads/latest",{headers:{Authorization:"Bearer "+this.token}}),t=await e.json();if(t.error)throw t;return t}catch(e){let t=e.statusText||"Error de Front: Al obtener fecha ultima de importacion";this.setAppError(t),this.$emit("error",e)}}},async mounted(){let e=await this.getLastLoad();"undefined"!==typeof e&&"success"==e.status&&(this.loadDate=e.data.load.date)}};const ee=(0,u.Z)(Q,[["render",X],["__scopeId","data-v-04f50c24"]]);var te=ee;const ae={class:"estadisticas-generales d-flex align-items-center p-2"},se={class:"h6"},re=(0,r.Uk)(" Cumplimiento: "),oe={class:"h6"},ne=(0,r.Uk)(" Asignados: ["),ie=(0,r.Uk)("] "),le={class:"h6"},ce=(0,r.Uk)(" Gestionados: ["),de=(0,r.Uk)("] "),ue={class:"h6"},pe=(0,r.Uk)(" Entregados: ["),he=(0,r.Uk)("] "),me={class:"h6"},ge=(0,r.Uk)(" Parciales: ["),fe=(0,r.Uk)("] "),ve={class:"h6"},_e=(0,r.Uk)(" No Entregados: ["),be=(0,r.Uk)("] ");function we(e,t,a,s,o,n){return(0,r.wg)(),(0,r.iD)("div",ae,[(0,r._)("p",se,[(0,r._)("span",null,(0,i.zw)(n.compliance)+"%",1),re]),(0,r._)("p",oe,[ne,(0,r._)("span",null,(0,i.zw)(n.assigned),1),ie]),(0,r._)("p",le,[ce,(0,r._)("span",null,(0,i.zw)(n.managed),1),de]),(0,r._)("p",ue,[pe,(0,r._)("span",null,(0,i.zw)(n.delivered),1),he]),(0,r._)("p",me,[ge,(0,r._)("span",null,(0,i.zw)(n.partial),1),fe]),(0,r._)("p",ve,[_e,(0,r._)("span",null,(0,i.zw)(n.noDelivered),1),be])])}var ye={props:["tracking"],computed:{compliance(){return(100*this.managed/this.assigned).toFixed(2)},assigned(){return this.tracking.reduce(((e,t)=>e+t.info.assigned),0)},managed(){return this.tracking.reduce(((e,t)=>e+t.info.managed),0)},delivered(){return this.tracking.reduce(((e,t)=>e+t.managed.delivered),0)},partial(){return this.tracking.reduce(((e,t)=>e+t.managed.partial),0)},noDelivered(){return this.tracking.reduce(((e,t)=>e+t.managed.notDelivered),0)}}};const ke=(0,u.Z)(ye,[["render",we],["__scopeId","data-v-8929204c"]]);var xe=ke;const De=e=>((0,r.dD)("data-v-18fa75f4"),e=e(),(0,r.Cn)(),e),Se={class:"placa d-flex justify-content-between align-items-start bg-white m-2 mb-3 p-2"},Ee={class:"datos-principales"},Ce={class:"header d-flex justify-content-between align-items-center mb-1"},Ae=De((()=>(0,r._)("div",{class:"punto bg-secondary rounded-circle align-self-start"},null,-1))),Te={class:"codigo flex-grow-1"},Fe={class:"p-0 m-0 h6"},Me=De((()=>(0,r._)("i",{class:"message fa-solid fa-comment h4"},null,-1))),Ie={class:"estadisticas p-1",title:"Las demas gestiones no son visibles pero si consideradas para el cumplimiento"},ze={class:"entregados"},Oe={class:"d-flex justify-content-between"},je={class:"m-0 p-0"},Re={class:"m-0 p-0"},Ne=["value"],Ue={class:"parciales"},We={class:"d-flex justify-content-between"},Le={class:"m-0 p-0"},Ve={class:"m-0 p-0"},Be=["value"],Pe={class:"no-entregados"},Ze={class:"d-flex justify-content-between"},$e={class:"m-0 p-0"},Ge={class:"m-0 p-0"},He=["value"],Ye={class:"valores d-flex flex-grow-1"},Ke={class:"asignados text-center p-1"},qe={class:"h6"},Je=De((()=>(0,r._)("small",{class:"text-secondary"},"Asignados",-1))),Xe={class:"gestionados text-center p-1"},Qe={class:"h6"},et=De((()=>(0,r._)("small",{class:"text-secondary"},"Gestionados",-1))),tt={class:"cumplimiento flex-grow-1"},at=De((()=>(0,r._)("p",{class:"m-0 h6"},"Cumplimiento",-1))),st={class:"w-100 d-flex justify-content-between align-items-center"},rt=["value"],ot={class:"m-0 p-1 h6"};function nt(e,t,a,s,o,n){return(0,r.wg)(),(0,r.iD)("div",Se,[(0,r._)("div",Ee,[(0,r._)("div",Ce,[Ae,(0,r._)("div",Te,[(0,r._)("p",Fe,(0,i.zw)(a.data.vehicle),1),(0,r._)("small",{class:(0,i.C_)({"text-success":"En Ruta"==a.data.statusRoute,"text-danger":"Sin operador asignado"==a.data.statusRoute,"text-warning":"Ruta no iniciada"==a.data.statusRoute})},(0,i.zw)(a.data.statusRoute),3)]),Me]),(0,r._)("div",Ie,[(0,r._)("div",ze,[(0,r._)("div",Oe,[(0,r._)("p",je,(0,i.zw)(a.data.managed.delivered)+" Entregadas",1),(0,r._)("p",Re,(0,i.zw)(n.procentManaged)+"%",1)]),(0,r._)("progress",{class:"w-100",max:"100",value:n.procentManaged},null,8,Ne)]),(0,r._)("div",Ue,[(0,r._)("div",We,[(0,r._)("p",Le,(0,i.zw)(a.data.managed.partial)+" Parciales",1),(0,r._)("p",Ve,(0,i.zw)(n.procentPartial)+"%",1)]),(0,r._)("progress",{class:"w-100",max:"100",value:n.procentPartial},null,8,Be)]),(0,r._)("div",Pe,[(0,r._)("div",Ze,[(0,r._)("p",$e,(0,i.zw)(a.data.managed.notDelivered)+" No Entregadas",1),(0,r._)("p",Ge,(0,i.zw)(n.procentNotManaged)+"%",1)]),(0,r._)("progress",{class:"w-100",max:"100",value:n.procentNotManaged},null,8,He)])])]),(0,r._)("div",Ye,[(0,r._)("div",Ke,[(0,r._)("p",qe,(0,i.zw)(a.data.info.assigned),1),Je]),(0,r._)("div",Xe,[(0,r._)("p",Qe,(0,i.zw)(a.data.info.managed),1),et])]),(0,r._)("div",tt,[at,(0,r._)("div",st,[(0,r._)("progress",{class:"w-100",max:"100",value:n.compliance},null,8,rt),(0,r._)("p",ot,(0,i.zw)(n.compliance)+"%",1)])])])}var it={props:["data"],name:"DashTrackin",computed:{procentManaged(){return(100*this.data.managed.delivered/this.data.info.assigned).toFixed(2)},procentPartial(){return(100*this.data.managed.partial/this.data.info.assigned).toFixed(2)},procentNotManaged(){return(100*this.data.managed.notDelivered/this.data.info.assigned).toFixed(2)},compliance(){return(100*this.data.info.managed/this.data.info.assigned).toFixed(0)}}};const lt=(0,u.Z)(it,[["render",nt],["__scopeId","data-v-18fa75f4"]]);var ct=lt,dt=a.p+"img/dataEmpty.79130cce.svg";const ut=e=>((0,r.dD)("data-v-e7cbbd1c"),e=e(),(0,r.Cn)(),e),pt={class:"dataEmpty"},ht=ut((()=>(0,r._)("img",{src:dt,alt:""},null,-1))),mt=ut((()=>(0,r._)("span",{class:"text-center mt-3 d-block text-secondary"},"Tracking vacio",-1))),gt=[ht,mt];function ft(e,t){return(0,r.wg)(),(0,r.iD)("div",pt,gt)}const vt={},_t=(0,u.Z)(vt,[["render",ft],["__scopeId","data-v-e7cbbd1c"]]);var bt=_t;const wt={class:"modal fade",id:"modalStepper",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true","data-backdrop":"static","data-keyboard":"false"},yt={class:"modal-dialog modal-dialog-centered modal-lg",role:"document"},kt={class:"modal-content"},xt={class:"modal-body"};function Dt(e,t,a,s,o,n){const i=(0,r.up)("Stepper");return(0,r.wg)(),(0,r.iD)("div",wt,[(0,r._)("div",yt,[(0,r._)("div",kt,[(0,r._)("div",xt,[(0,r.Wm)(i)])])])])}const St=e=>((0,r.dD)("data-v-58fc9a84"),e=e(),(0,r.Cn)(),e),Et={key:0,class:"h-100 text-center d-flex align-items-center justify-content-center"},Ct=St((()=>(0,r._)("label",{class:"btn border text-primary",for:"importer"},"Seleccionar archivo",-1))),At={key:1,class:"w-50 m-auto d-flex flex-column"},Tt={class:"file-selected w-100 mx-auto d-flex mt-4 justify-content-between align-items-center px-3 py-2"},Ft=St((()=>(0,r._)("h2",{class:"m-0"},[(0,r._)("i",{class:"fa-solid fa-file flex-strech"})],-1))),Mt={class:"d-flex flex-column flex-grow-1 mx-3"},It={class:"name"},zt={class:"kb"},Ot=St((()=>(0,r._)("div",{class:"h-100 alert alert-success d-flex align-items-center justify-content-center"},[(0,r._)("h5",null,"Data almacenada")],-1))),jt={class:"d-flex justify-content-end"},Rt={key:0};function Nt(e,t,a,s,o,n){const l=(0,r.up)("Step"),c=(0,r.up)("StepperHeader"),d=(0,r.up)("StepperContent"),u=(0,r.up)("ContentValidate"),p=(0,r.up)("StepperBody"),h=(0,r.up)("SpinnerButton"),m=(0,r.up)("StepperFooter"),g=(0,r.up)("Stepper",!0);return(0,r.wg)(),(0,r.j4)(g,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Wm)(l,{step:"1",text:"Subir Doc."}),(0,r.Wm)(l,{step:"2",text:"Validar Doc."}),(0,r.Wm)(l,{step:"3",text:"Almacenar data"})])),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{step:"1"},{default:(0,r.w5)((()=>[o.file?((0,r.wg)(),(0,r.iD)("div",At,[(0,r._)("div",Tt,[Ft,(0,r._)("div",Mt,[(0,r._)("span",It,(0,i.zw)(o.file.name),1),(0,r._)("span",zt,(0,i.zw)((o.file.size/1024).toFixed(2))+" kB",1)]),(0,r._)("i",{onClick:t[1]||(t[1]=e=>o.file=null),role:"button",class:"fa-solid fa-xmark"})]),(0,r._)("button",{onClick:t[2]||(t[2]=(...e)=>n.handleUpload&&n.handleUpload(...e)),class:"btn border text-info align-self-end mt-3"}," Subir ")])):((0,r.wg)(),(0,r.iD)("div",Et,[Ct,(0,r._)("input",{id:"importer",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",hidden:"",type:"file",onChange:t[0]||(t[0]=(...e)=>n.handleSelectFile&&n.handleSelectFile(...e))},null,32)]))])),_:1}),(0,r.Wm)(d,{step:"2"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{contentError:o.contentError},null,8,["contentError"])])),_:1}),(0,r.Wm)(d,{step:"3"},{default:(0,r.w5)((()=>[Ot])),_:1})])),_:1}),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r._)("div",jt,[3==e.getStepper.stepActual?((0,r.wg)(),(0,r.iD)("div",Rt,[(0,r.Wm)(h,{onClick:n.handleCancelImport,text:"Cancelar Importacion",textLoading:"Cancelando",loading:o.loadingCancelSpinner,classes:"btn-sm alert-danger mr-4"},null,8,["onClick","loading"]),(0,r.Wm)(h,{onClick:n.handleContainImport,text:"Contener Importacion",textLoading:"Conteniendo",loading:e.loadingContainSpinner,classes:"btn-sm alert-success"},null,8,["onClick","loading"])])):((0,r.wg)(),(0,r.iD)("button",{key:1,class:"btn btn-sm alert-secondary","data-dismiss":"modal",onClick:t[3]||(t[3]=(...e)=>n.handleCloseStepper&&n.handleCloseStepper(...e))}," Cerrar "))])])),_:1})])),_:1})}function Ut(e,t,a,s,o,n){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.WI)(e.$slots,"default")])}var Wt={name:"StepperVue"};const Lt=(0,u.Z)(Wt,[["render",Ut]]);var Vt=Lt;const Bt={class:"d-flex justify-content-around align-items-center mx-5"},Pt={class:"d-flex justify-content-between align-items-center mb-2"};function Zt(e,t,a,s,o,n){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",Bt,[(0,r.WI)(e.$slots,"default",{},void 0,!0)]),(0,r._)("div",Pt,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.getStepper.titles,(t=>((0,r.wg)(),(0,r.iD)("span",{key:t.text,class:"description",style:(0,i.j5)(e.getStepper.stepError==t.step?o.descriptionError:e.getStepper.stepActual==t.step||n.isStepPast(t.step)?o.descriptionActive:o.descriptionDeactive)},(0,i.zw)(t.text),5)))),128))])],64)}var $t={computed:{...(0,n.Se)(["getStepper"])},data(){return{descriptionActive:{color:"black",fontWeight:"500"},descriptionDeactive:{fontWeight:"lighter",color:"#BABABA"},descriptionError:{fontWeight:"black",color:"#dc3545"}}},methods:{isStepPast(e){return this.getStepper.pastSteps.find((t=>t==e))}}};const Gt=(0,u.Z)($t,[["render",Zt],["__scopeId","data-v-0517dd82"]]);var Ht=Gt;const Yt={class:"stepper-body"};function Kt(e,t){return(0,r.wg)(),(0,r.iD)("div",Yt,[(0,r.WI)(e.$slots,"default",{},void 0,!0)])}const qt={},Jt=(0,u.Z)(qt,[["render",Kt],["__scopeId","data-v-0f13c62b"]]);var Xt=Jt;const Qt={class:"content"};function ea(e,t,a,o,n,i){return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",Qt,[(0,r.WI)(e.$slots,"default",{},void 0,!0)],512)),[[s.F8,e.getStepper.stepActual==a.step]])}var ta={props:["step"],computed:{...(0,n.Se)(["getStepper"])}};const aa=(0,u.Z)(ta,[["render",ea],["__scopeId","data-v-60fe926a"]]);var sa=aa;function ra(e,t,a,o,n,l){return(0,r.wg)(),(0,r.iD)("div",{class:(0,i.C_)(["content-validate h-100 position-relative overflow-auto",a.contentError.message?"alert alert-danger":""])},[(0,r._)("p",null,"·"+(0,i.zw)(a.contentError.message),1),(0,r.wy)((0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.contentError.details,((e,t)=>((0,r.wg)(),(0,r.iD)("p",{class:"ml-5",key:t}," ·"+(0,i.zw)(e),1)))),128))],512),[[s.F8,a.contentError.details]])],2)}var oa={props:["contentError"]};const na=(0,u.Z)(oa,[["render",ra]]);var ia=na;const la={class:"mt-4"};function ca(e,t){return(0,r.wg)(),(0,r.iD)("div",la,[(0,r.WI)(e.$slots,"default")])}const da={},ua=(0,u.Z)(da,[["render",ca]]);var pa=ua;function ha(e,t,a,s,o,n){return(0,r.wg)(),(0,r.iD)("button",{type:"submit",class:(0,i.C_)(["btn",a.classes])},[(0,r._)("span",{class:(0,i.C_)(["spinner-border spinner-border-sm mx-1",a.loading?"":"d-none"]),role:"status","aria-hidden":"true"},null,2),(0,r.Uk)(" "+(0,i.zw)(a.loading?a.textLoading:a.text),1)],2)}var ma={props:{loading:Boolean,text:String,textLoading:String,classes:String}};const ga=(0,u.Z)(ma,[["render",ha]]);var fa=ga;const va=()=>{const e=new Date,t=60*e.getTimezoneOffset()*1e3,a=new Date(e.getTime()-t),s=a.toISOString().slice(0,19).replace(/-/g,"-").replace("T"," ");return s},_a=e=>{const t=864e5,a=7,s=4;e=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));let r=e.getUTCDay();0===r&&(r=7),e.setUTCDate(e.getUTCDate()-r+s);const o=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=e-o;return Math.ceil((n/t+1)/a)},ba=(e,t)=>{try{return Date.parse("1/1/1990 "+e)>Date.parse("1/1/1990 "+t)}catch(a){return!1}},wa=e=>{try{let t=e.reduce(((e,t)=>new Date(e)<new Date(t)?e:t));return t}catch(t){return!1}},ya=e=>{try{let t=e.reduce(((e,t)=>new Date(e)>new Date(t)?e:t));return t}catch(t){return console.log("Error de Front: Al obtener mayor fecha de gestionados de usuario "+t),!1}},ka=e=>{try{return e.split(" ")[0]}catch(t){return!1}},xa=e=>{try{return e.split(" ")[1]}catch(t){return!1}},Da={key:0,class:"fa-solid fa-check"},Sa={key:1},Ea={key:1,class:"icon-error-step fa-solid fa-triangle-exclamation text-danger"},Ca={class:"hr flex-grow-1"};function Aa(e,t,a,o,n,l){return(0,r.wg)(),(0,r.iD)(r.HY,null,[e.getStepper.stepError!=a.step?((0,r.wg)(),(0,r.iD)("span",{key:0,style:(0,i.j5)(e.getStepper.stepActual==a.step||l.isStepPast(a.step)?n.stepActive:n.stepDeactive),class:"step text-white"},[l.isStepPast(a.step)?((0,r.wg)(),(0,r.iD)("i",Da)):((0,r.wg)(),(0,r.iD)("span",Sa,(0,i.zw)(a.step),1))],4)):((0,r.wg)(),(0,r.iD)("i",Ea)),(0,r.wy)((0,r._)("hr",Ca,null,512),[[s.F8,a.step!=e.getStepper.titles.length]])],64)}var Ta={props:["step","text"],name:"StepVue",data(){return{stepActive:{background:"#007bff"},stepDeactive:{background:"rgba(0, 0, 0, 0.38)"}}},computed:{...(0,n.Se)(["getStepper"])},methods:{...(0,n.OI)(["setStepperTitle"]),isStepPast(e){return this.getStepper.pastSteps.find((t=>t==e))}},mounted(){this.getStepper.titles.length<3&&this.setStepperTitle({text:this.text,step:this.step})}};const Fa=(0,u.Z)(Ta,[["render",Aa],["__scopeId","data-v-097b18ea"]]);var Ma=Fa,Ia={name:"StepperVue",components:{Stepper:Vt,StepperHeader:Ht,Step:Ma,StepperBody:Xt,StepperContent:sa,ContentValidate:ia,StepperFooter:pa,SpinnerButton:fa},data(){return{token:localStorage.getItem("token_user"),loadingCancelSpinner:!1,file:null,contentError:{},loadId:null}},computed:{...(0,n.Se)(["getStepper"])},methods:{...(0,n.nv)(["resetStepper"]),...(0,n.OI)(["setSomeStepper","setStepperPast","setAppError"]),async uploadFile(e){try{this.setSomeStepper({field:"stepActual",value:2}),this.setStepperPast(1);let t=new FormData;t.append("file",e),t.append("date",va());let a=await fetch("http://srv515666.hstgr.cloud:4001/server-user/loads",{method:"POST",body:t,headers:{Authorization:"Bearer "+this.token}}),s=await a.json();if(s.error)throw s;return s}catch(t){let e=t.statusText||`Error de Front: Al importar archivo: ${t}`;this.setAppError(e)}},async deleteLoad(e){try{let t=await fetch(`http://srv515666.hstgr.cloud:4001/server-user/loads/${e}`,{method:"DELETE",headers:{Authorization:"Bearer "+this.token}}),a=await t.json();if(a.error)throw a;return a}catch(t){let e=t.statusText||`Error de Front: Al eliminar entrega: ${t}`;this.setAppError(e)}},async handleSelectFile(){const e=document.getElementById("importer");e.files[0]&&(this.file=e.files[0])},async handleUpload(){let e=this.$loading.show({container:document.querySelector(".content-validate"),canCancel:!1,color:"#007bff",height:"30",onCancel:!1});if(!this.file)return;let t=await this.uploadFile(this.file);"undefined"!==typeof t&&("success"==t.status&&(this.loadId=t.data.loadId,this.setSomeStepper({field:"stepActual",value:3}),this.setStepperPast(2),this.setStepperPast(3),e.hide()),"fail"==t.status&&(this.contentError=t.data,this.setSomeStepper({field:"stepError",value:2}),e.hide()))},async handleCancelImport(){this.loadingCancelSpinner=!0;let e=await this.deleteLoad(this.loadId);console.log(e),"undefined"!=typeof e&&"success"==e.status&&(this.loadingCancelSpinner=!1,location.reload())},async handleContainImport(){this.loadingContainSpinner=!0,this.handleCloseStepper(),location.reload()},handleCloseStepper(){this.resetStepper(),this.file=null,this.contentError={}}},mounted(){}};const za=(0,u.Z)(Ia,[["render",Nt],["__scopeId","data-v-58fc9a84"]]);var Oa=za,ja={components:{Stepper:Oa}};const Ra=(0,u.Z)(ja,[["render",Dt],["__scopeId","data-v-74d88008"]]);var Na=Ra;const Ua=(e,t,{backgroundColor:a}={})=>e.show({backgroundColor:a,container:document.querySelector(t),canCancel:!1,color:"rgb(27, 209, 155)",height:"25",onCancel:!1});var Wa={name:"TrackinView",components:{DashMenu:Z,StepperModal:Na,DashTop:te,DashStatistics:xe,DashTrackin:ct,DashEmpty:bt},data(){return{token:localStorage.getItem("token_user"),coords:{},isFetch:!1,tracking:[]}},methods:{...(0,n.OI)(["setAppError"]),async getTracking(){try{let e=await fetch("http://srv515666.hstgr.cloud:4001/server-user/tracking/latest",{headers:{Authorization:"Bearer "+this.token}}),t=await e.json();if(t.error)throw t;return t}catch(e){let t=e.statusText||`Error de Front: Al obtener tracking: ${e}`;this.setAppError(t)}}},async mounted(){let e=Ua(this.$loading,".container-tracking"),t=await this.getTracking();"undefined"!=typeof t&&"success"==t.status&&(this.tracking=t.data.tracking,this.isFetch=!0,e.hide())}};const La=(0,u.Z)(Wa,[["render",O],["__scopeId","data-v-d5c91104"]]);var Va=La;const Ba={class:"container"},Pa={class:"bg-light"},Za={class:"nav nav-tabs"},$a={class:"nav-item"},Ga=(0,r.Uk)("Grupos"),Ha={class:"nav-item"},Ya=(0,r.Uk)("Vehiculos"),Ka={class:"nav-item"},qa=(0,r.Uk)("Operadores");function Ja(e,t,a,s,o,n){const l=(0,r.up)("RowBack"),c=(0,r.up)("router-link"),d=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",Ba,[(0,r.Wm)(l,{pageName:"tracking"}),(0,r._)("div",Pa,[(0,r._)("ul",Za,[(0,r._)("li",$a,[(0,r.Wm)(c,{class:(0,i.C_)([{active:"Grupos"==e.config.activeTab},"nav-link"]),to:{name:"groups"}},{default:(0,r.w5)((()=>[Ga])),_:1},8,["class"])]),(0,r._)("li",Ha,[(0,r.Wm)(c,{class:(0,i.C_)([{active:"Vehiculos"==e.config.activeTab},"nav-link"]),to:{name:"vehicles"}},{default:(0,r.w5)((()=>[Ya])),_:1},8,["class"])]),(0,r._)("li",Ka,[(0,r.Wm)(c,{class:(0,i.C_)([{active:"Operadores"==e.config.activeTab},"nav-link"]),to:{name:"operators"}},{default:(0,r.w5)((()=>[qa])),_:1},8,["class"])])])]),(0,r.Wm)(d)])}const Xa={class:"py-2"},Qa=(0,r._)("i",{class:"fa fa-arrow-left","aria-hidden":"true"},null,-1);function es(e,t,a,s,o,n){const i=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",Xa,[(0,r.Wm)(i,{class:"h3 mx-2",to:{name:a.pageName,params:a.params}},{default:(0,r.w5)((()=>[Qa])),_:1},8,["to"])])}var ts={props:["pageName","params"]};const as=(0,u.Z)(ts,[["render",es]]);var ss=as,rs={components:{RowBack:ss},computed:{...(0,n.rn)(["config"])}};const os=(0,u.Z)(rs,[["render",Ja]]);var ns=os;const is=e=>((0,r.dD)("data-v-2b29419a"),e=e(),(0,r.Cn)(),e),ls={class:"p-3 container-groups position-relative"},cs={class:"head p-1 d-flex justify-content-between align-items-center"},ds=is((()=>(0,r._)("h5",null,null,-1))),us=is((()=>(0,r._)("button",{class:"btn bg-warning mx-2 text-white"},"Bitacora",-1))),ps=is((()=>(0,r._)("button",{class:"btn btn-primary","data-toggle":"modal","data-target":"#modalNewGroup"}," Crear grupo ",-1))),hs=is((()=>(0,r._)("br",null,null,-1))),ms={class:"data p-1 bg-white"},gs=is((()=>(0,r._)("div",{class:"row"},[(0,r._)("h6",{class:"col"},"Nombre"),(0,r._)("h6",{class:"col-4"},"Fecha de creacion")],-1))),fs={class:"groups"},vs={class:"col"},_s={class:"col-4"};function bs(e,t,a,s,o,n){const l=(0,r.up)("GroupModal");return(0,r.wg)(),(0,r.iD)("div",ls,[(0,r._)("div",cs,[ds,(0,r._)("div",null,[us,ps,(0,r.Wm)(l)])]),hs,(0,r._)("div",ms,[gs,(0,r._)("div",fs,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.groups,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"group row border-top text-secondary",key:e.id},[(0,r._)("p",vs,(0,i.zw)(e.name),1),(0,r._)("p",_s,(0,i.zw)(e.date),1)])))),128))])])])}const ws={class:"modal fade",id:"modalNewGroup",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},ys={class:"modal-dialog modal-dialog-centered",role:"document"},ks=(0,r._)("div",{class:"modal-header"},[(0,r._)("h4",{class:"modal-title text-center"},"Crear grupo")],-1),xs={class:"modal-body"},Ds={class:"form-group"},Ss=(0,r._)("label",null,"Nombre de grupo",-1),Es=(0,r._)("br",null,null,-1),Cs={class:"form-group"},As=(0,r._)("label",null,"Fecha de creacion",-1),Ts={class:"modal-footer"},Fs=(0,r._)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close ",-1);function Ms(e,t,a,o,n,i){const l=(0,r.up)("SpinnerButton");return(0,r.wg)(),(0,r.iD)("div",ws,[(0,r._)("div",ys,[(0,r._)("form",{class:"modal-content",onSubmit:t[2]||(t[2]=(0,s.iM)(((...e)=>i.newGroup&&i.newGroup(...e)),["prevent"]))},[ks,(0,r._)("div",xs,[(0,r._)("div",null,[(0,r._)("div",Ds,[Ss,(0,r.wy)((0,r._)("input",{name:"name",type:"text",class:"form-control",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>n.data.name=e)},null,512),[[s.nr,n.data.name]])]),Es,(0,r._)("div",Cs,[As,(0,r.wy)((0,r._)("input",{name:"creationDate",disabled:"",type:"date",required:"",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>n.creationDate=e)},null,512),[[s.nr,n.creationDate]])])])]),(0,r._)("div",Ts,[(0,r.Wm)(l,{classes:"btn-primary",loading:n.loaderSpinner,text:"Crear",textLoading:"Creando"},null,8,["loading"]),Fs])],32)])])}var Is={components:{SpinnerButton:fa},data(){return{token:localStorage.getItem("token_user"),loaderSpinner:!1,creationDate:ka(va()),data:{name:""}}},methods:{...(0,n.OI)(["setAppError"]),async newGroup(){this.loaderSpinner=!0;try{const e="http://srv515666.hstgr.cloud:4001/server-user/groups";let t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token},body:JSON.stringify({...this.data,date:va()})}),a=await t.json();if(a.error)throw a;"success"==a.status&&(this.loaderSpinner=!1,location.reload()),"fail"==a.status&&alert("Halgo ha salido mal")}catch(e){let t=e.statusText||`Error de Front: Al crear grupo: ${e}`;this.setAppError(t)}}}};const zs=(0,u.Z)(Is,[["render",Ms]]);var Os=zs,js={components:{GroupModal:Os},name:"ConfigGroup",data(){return{token:localStorage.getItem("token_user"),groups:[]}},methods:{...(0,n.OI)(["setAppError","setConfigActiveTab"]),async getGroups(){try{const e="http://srv515666.hstgr.cloud:4001/server-user/groups";let t=await fetch(e,{headers:{Authorization:"Bearer "+this.token}}),a=await t.json();if(a.error)throw a;return a}catch(e){let t=e.statusText||`Error de Front: Al obtener grupos: ${e}`;this.setAppError(t)}}},async mounted(){this.setConfigActiveTab("Grupos");let e=Ua(this.$loading,".container-groups"),t=await this.getGroups();"undefined"!==typeof t&&"success"==t.status&&(this.groups=t.data.groups,e.hide())}};const Rs=(0,u.Z)(js,[["render",bs],["__scopeId","data-v-2b29419a"]]);var Ns=Rs;const Us=e=>((0,r.dD)("data-v-4ce975e8"),e=e(),(0,r.Cn)(),e),Ws={class:"p-3 container-associates position-relative"},Ls={class:"head p-1 d-flex justify-content-between align-items-center"},Vs=Us((()=>(0,r._)("h5",null,null,-1))),Bs=Us((()=>(0,r._)("button",{class:"btn btn-primary","data-toggle":"modal","data-target":"#modalNewAssociate"}," Establecer grupo a vehiculo ",-1))),Ps=Us((()=>(0,r._)("br",null,null,-1))),Zs={class:"data p-1 bg-white"},$s=Us((()=>(0,r._)("div",{class:"row"},[(0,r._)("h6",{class:"col"},"Placa"),(0,r._)("h6",{class:"col-4"},"Grupo")],-1))),Gs={class:"associations"},Hs={class:"col"},Ys={class:"col-4"};function Ks(e,t,a,s,o,n){const l=(0,r.up)("VehicleModal");return(0,r.wg)(),(0,r.iD)("div",Ws,[(0,r._)("div",Ls,[Vs,Bs,(0,r.Wm)(l)]),Ps,(0,r._)("div",Zs,[$s,(0,r._)("div",Gs,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.vehicles,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"association row border-top text-secondary",key:e.id},[(0,r._)("p",Hs,(0,i.zw)(e.patent),1),(0,r._)("p",Ys,(0,i.zw)(e.name),1)])))),128))])])])}const qs={class:"modal fade",id:"modalNewAssociate",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},Js={class:"modal-dialog modal-dialog-centered",role:"document"},Xs=(0,r._)("div",{class:"modal-header"},[(0,r._)("h4",{class:"modal-title text-center"},"Establecer")],-1),Qs={class:"modal-body"},er={class:"form-group"},tr=(0,r._)("label",{for:""},"Grupos",-1),ar=(0,r._)("option",{selected:"",hidden:""},null,-1),sr=["value"],rr=(0,r._)("br",null,null,-1),or={class:"form-group"},nr=(0,r._)("label",{for:""},"Vehiculos disponibles",-1),ir=(0,r._)("option",{selected:"",hidden:""},null,-1),lr=["value"],cr=(0,r._)("br",null,null,-1),dr={class:"modal-footer"},ur=(0,r._)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close ",-1);function pr(e,t,a,o,n,l){const c=(0,r.up)("SpinnerButton");return(0,r.wg)(),(0,r.iD)("div",qs,[(0,r._)("div",Js,[(0,r._)("form",{class:"modal-content",onSubmit:t[2]||(t[2]=(0,s.iM)(((...e)=>l.updateVehicle&&l.updateVehicle(...e)),["prevent"]))},[Xs,(0,r._)("div",Qs,[(0,r._)("div",null,[(0,r._)("div",er,[tr,(0,r.wy)((0,r._)("select",{name:"group",class:"form-select form-control",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>n.groupId=e)},[ar,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.groups,(e=>((0,r.wg)(),(0,r.iD)("option",{value:e.id,key:e.id},(0,i.zw)(e.name),9,sr)))),128))],512),[[s.bM,n.groupId]])]),rr,(0,r._)("div",or,[nr,(0,r.wy)((0,r._)("select",{name:"vehicle",class:"form-select form-control",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>n.vehicleId=e)},[ir,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.vehicles,(e=>((0,r.wg)(),(0,r.iD)("option",{value:e.id,key:e.id},(0,i.zw)(e.patent),9,lr)))),128))],512),[[s.bM,n.vehicleId]])]),cr])]),(0,r._)("div",dr,[(0,r.Wm)(c,{classes:"btn-primary",loading:n.loaderSpinner,text:"Establecer",textLoading:"Estableciendo"},null,8,["loading"]),ur])],32)])])}var hr={components:{SpinnerButton:fa},data(){return{token:localStorage.getItem("token_user"),loaderSpinner:!1,vehicles:[],groups:[],vehicleId:null,groupId:null}},methods:{...(0,n.OI)(["setAppError"]),async getGroups(){try{let e=await fetch("http://srv515666.hstgr.cloud:4001/server-user/groups",{headers:{Authorization:"Bearer "+this.token}}),t=await e.json();if(t.error)throw t;return t}catch(e){let t=e.statusText||"Error de Front: Al obtener grupos para associaciones";this.setAppError(t)}},async getVehiclesWithoutGroup(){try{let e=await fetch("http://srv515666.hstgr.cloud:4001/server-user/vehicles/NO-G",{headers:{Authorization:"Bearer "+this.token}}),t=await e.json();if(t.error)throw t;return t}catch(e){let t=e.statusText||"Error de Front: Al obtener vehiculos para associaciones";this.setAppError(t)}},async updateVehicle(){this.loaderSpinner=!0;try{let e=await fetch(`http://srv515666.hstgr.cloud:4001/server-user/vehicles/${this.vehicleId}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token},body:JSON.stringify({groupId:this.groupId})}),t=await e.json();if(t.error)throw t;"success"==t.status?(this.loaderSpinner=!1,location.reload()):alert("Halgo ha salido mal")}catch(e){let t=e.statusText||"Error de Front: Al establecer grupo a vehiculo";this.setAppError(t)}}},async mounted(){let e=await this.getGroups();if("undefined"===typeof e)return;"success"==e.status&&(this.groups=e.data.groups);let t=await this.getVehiclesWithoutGroup();"undefined"!==typeof t&&"success"==t.status&&(this.vehicles=t.data.vehicles)}};const mr=(0,u.Z)(hr,[["render",pr]]);var gr=mr,fr={components:{VehicleModal:gr},name:"ConfigAssociate",data(){return{token:localStorage.getItem("token_user"),vehicles:[]}},methods:{...(0,n.OI)(["setAppError","setConfigActiveTab"]),async getVehiclesWithGroup(){try{const e="http://srv515666.hstgr.cloud:4001/server-user/vehicles/G";let t=await fetch(e,{headers:{Authorization:"Bearer "+this.token}}),a=await t.json();if(a.error)throw a;return a}catch(e){let t=e.statusText||"Error de Front: Al obtener asociaciones";this.setAppError(t)}}},async mounted(){this.setConfigActiveTab("Vehiculos");let e=Ua(this.$loading,".container-associates"),t=await this.getVehiclesWithGroup();"undefined"!==typeof t&&"success"==t.status&&(this.vehicles=t.data.vehicles,e.hide())}};const vr=(0,u.Z)(fr,[["render",Ks],["__scopeId","data-v-4ce975e8"]]);var _r=vr;const br={class:"p-3 container-users position-relative"},wr={class:"data p-1 bg-white"},yr=(0,r.uE)('<div class="row" data-v-66096036><h6 class="col" data-v-66096036>Nombre completo</h6><h6 class="col" data-v-66096036>Nombre de usuario</h6><h6 class="col" data-v-66096036>Pin</h6><h6 class="col" data-v-66096036>Vehiculo asignado</h6><h6 class="col" data-v-66096036>Fecha de creacion</h6></div>',1),kr={class:"users"},xr={class:"col"},Dr={class:"col"},Sr={class:"col"},Er={class:"col"},Cr={class:"col"};function Ar(e,t,a,s,o,n){const l=(0,r.up)("TopConfigOperator");return(0,r.wg)(),(0,r.iD)("div",br,[(0,r.Wm)(l),(0,r._)("div",wr,[yr,(0,r._)("div",kr,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.operators,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"user row border-top text-secondary",key:e.id},[(0,r._)("p",xr,(0,i.zw)(e.fullName),1),(0,r._)("p",Dr,(0,i.zw)(e.userName),1),(0,r._)("p",Sr,(0,i.zw)(e.pin),1),(0,r._)("p",Er,(0,i.zw)(e.patent),1),(0,r._)("p",Cr,(0,i.zw)(e.date),1)])))),128))])])])}const Tr={class:"p-1 d-flex justify-content-between align-items-center"},Fr={class:"d-flex w-75 justify-content-end"},Mr={class:"m-0 alert-warning px-2 text-right"},Ir=(0,r.Uk)(" Gestion para operadores en "),zr=["href"],Or=(0,r._)("button",{class:"btn btn-primary","data-toggle":"modal","data-target":"#modalNewUser"}," Crear operador ",-1),jr=(0,r._)("br",null,null,-1);function Rr(e,t,a,s,o,n){const l=(0,r.up)("OperatorModal");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",Tr,[(0,r._)("div",Fr,[(0,r._)("p",Mr,[Ir,(0,r._)("a",{target:"_blank",href:o.url+o.userId},(0,i.zw)(o.url+o.userId),9,zr)])]),Or,(0,r.Wm)(l)]),jr],64)}const Nr={class:"modal fade",id:"modalNewUser",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},Ur={class:"modal-dialog modal-dialog-centered",role:"document"},Wr=(0,r._)("div",{class:"modal-header"},[(0,r._)("h4",{class:"modal-title text-center"},"Crear operador")],-1),Lr={class:"modal-body"},Vr={class:"form-group"},Br=(0,r._)("label",null,"Nombre completo",-1),Pr=(0,r._)("br",null,null,-1),Zr={class:"form-group"},$r=(0,r._)("label",null,"Nombre de usuario",-1),Gr=(0,r._)("br",null,null,-1),Hr={class:"form-group"},Yr=(0,r._)("label",null,"Pin",-1),Kr=(0,r._)("br",null,null,-1),qr={class:"form-group"},Jr=(0,r._)("label",null,"Vehiculos disponibles",-1),Xr=(0,r._)("option",{selected:"",hidden:""},null,-1),Qr=["value"],eo=(0,r._)("small",{class:"form-text text-muted"},"Vehiculo que se otorgara a este operador",-1),to=(0,r._)("br",null,null,-1),ao={class:"form-group"},so=(0,r._)("label",null,"Fecha de creacion",-1),ro=["value"],oo={class:"modal-footer"},no=(0,r._)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Close ",-1);function io(e,t,a,o,n,l){const c=(0,r.up)("SpinnerButton");return(0,r.wg)(),(0,r.iD)("div",Nr,[(0,r._)("div",Ur,[(0,r._)("form",{class:"modal-content",onSubmit:t[4]||(t[4]=(0,s.iM)(((...e)=>l.newOperator&&l.newOperator(...e)),["prevent"]))},[Wr,(0,r._)("div",Lr,[(0,r._)("div",null,[(0,r._)("div",Vr,[Br,(0,r.wy)((0,r._)("input",{name:"fullName",type:"text",class:"form-control",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>n.data.fullName=e)},null,512),[[s.nr,n.data.fullName]])]),Pr,(0,r._)("div",Zr,[$r,(0,r.wy)((0,r._)("input",{name:"userName",type:"text",class:"form-control",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>n.data.userName=e)},null,512),[[s.nr,n.data.userName]])]),Gr,(0,r._)("div",Hr,[Yr,(0,r.wy)((0,r._)("input",{name:"pin",type:"text",class:"form-control",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>n.data.pin=e)},null,512),[[s.nr,n.data.pin]])]),Kr,(0,r._)("div",qr,[Jr,(0,r.wy)((0,r._)("select",{name:"assignedVehicle",class:"form-select form-control",required:"","onUpdate:modelValue":t[3]||(t[3]=e=>n.data.vehicleId=e)},[Xr,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.vehicles,(e=>((0,r.wg)(),(0,r.iD)("option",{value:e.id,key:e.id},(0,i.zw)(e.patent),9,Qr)))),128))],512),[[s.bM,n.data.vehicleId]]),eo]),to,(0,r._)("div",ao,[so,(0,r._)("input",{name:"creationDate",disabled:"",type:"date",class:"form-control",value:n.creationDate},null,8,ro)])])]),(0,r._)("div",oo,[(0,r.Wm)(c,{classes:"btn-primary",loading:n.loaderSpinner,text:"Crear",textLoading:"Creando"},null,8,["loading"]),no])],32)])])}var lo={components:{SpinnerButton:fa},data(){return{token:localStorage.getItem("token_user"),loaderSpinner:!1,vehicles:[],creationDate:ka(va()),data:{fullName:"",userName:"",pin:"",vehicleId:0}}},methods:{...(0,n.OI)(["setAppError"]),async getVehicles_G_NO_O(){try{const e="http://srv515666.hstgr.cloud:4001/server-user/vehicles/G-NO-O";let t=await fetch(e,{headers:{Authorization:"Bearer "+this.token}}),a=await t.json();if(a.error)throw a;return a}catch(e){let t=e.statusText||"Error de Front: Al obtener vehiculos disponibles";this.setAppError(t)}},async newOperator(){this.loaderSpinner=!0;try{let e=await fetch("http://srv515666.hstgr.cloud:4001/server-user/operators",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token},body:JSON.stringify({...this.data,date:va()})}),t=await e.json();if(t.error)throw t;"success"==t.status?(this.loaderSpinner=!1,location.reload()):alert("Halgo ha salido mal")}catch(e){let t=e.statusText||"Error de Front: Al crear operador";this.setAppError(t)}}},async mounted(){let e=await this.getVehicles_G_NO_O();"undefined"!=typeof e&&"success"==e.status&&(this.vehicles=e.data.vehicles)}};const co=(0,u.Z)(lo,[["render",io]]);var uo=co,po={components:{OperatorModal:uo},data(){return{token:localStorage.getItem("token_user"),url:"http://arequepay.com/manage/",userId:"..."}},methods:{...(0,n.OI)(["setAppError"]),async getThisUser(){try{const e="http://srv515666.hstgr.cloud:4001/server-user/users-self";let t=await fetch(e,{headers:{Authorization:"Bearer "+this.token}}),a=await t.json();if(a.error)throw a;return a}catch(e){let t=e.statusText||"Error de Front: Al obtener datos del actual usuario";this.setAppError(t)}}},async mounted(){let e=await this.getThisUser();"undefined"!=typeof e&&"success"==e.status&&(this.userId=e.data.user.id)}};const ho=(0,u.Z)(po,[["render",Rr]]);var mo=ho,go={components:{TopConfigOperator:mo},name:"ConfigUser",data(){return{token:localStorage.getItem("token_user"),operators:[]}},methods:{...(0,n.OI)(["setAppError","setConfigActiveTab"]),async getOperators(){try{const e="http://srv515666.hstgr.cloud:4001/server-user/operators";let t=await fetch(e,{headers:{Authorization:"Bearer "+this.token}}),a=await t.json();if(a.error)throw a;return a}catch(e){let t=e.statusText||"Error de Front: Al obtener operadores";this.setAppError(t)}}},async mounted(){this.setConfigActiveTab("Operadores");let e=Ua(this.$loading,".container-users"),t=await this.getOperators();"undefined"!==typeof t&&"success"==t.status&&(this.operators=t.data.operators,e.hide())}};const fo=(0,u.Z)(go,[["render",Ar],["__scopeId","data-v-66096036"]]);var vo=fo;const _o={class:"container vh-100 d-flex flex-column"},bo={class:"bg-light"},wo={class:"nav nav-tabs"},yo={class:"nav-item"},ko=(0,r.Uk)("Mapa"),xo={class:"nav-item"},Do=(0,r.Uk)("Despachos"),So={class:"container-statistics overflow-auto p-3"};function Eo(e,t,a,s,o,n){const l=(0,r.up)("RowBack"),c=(0,r.up)("router-link"),d=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",_o,[(0,r.Wm)(l,{pageName:"tracking"}),(0,r._)("div",bo,[(0,r._)("ul",wo,[(0,r._)("li",yo,[(0,r.Wm)(c,{class:(0,i.C_)([{active:"Mapa"==e.statistics.activeTab},"nav-link"]),to:{name:"graphic"}},{default:(0,r.w5)((()=>[ko])),_:1},8,["class"])]),(0,r._)("li",xo,[(0,r.Wm)(c,{class:(0,i.C_)([{active:"Despachos"==e.statistics.activeTab},"nav-link"]),to:{name:"despatch"}},{default:(0,r.w5)((()=>[Do])),_:1},8,["class"])])])]),(0,r._)("div",So,[(0,r.Wm)(d)])])}var Co={components:{RowBack:ss},computed:{...(0,n.rn)(["statistics"])}};const Ao=(0,u.Z)(Co,[["render",Eo],["__scopeId","data-v-69c795cc"]]);var To=Ao;const Fo={class:"container-graphic d-flex mt-4 justify-content-between"},Mo=(0,r.Uk)(" - ");function Io(e,t,a,s,o,n){const i=(0,r.up)("GraphicFilter"),l=(0,r.up)("GMap");return(0,r.wg)(),(0,r.iD)("div",Fo,[(0,r.Wm)(i),(0,r.Wm)(l),Mo])}const zo={class:"d-flex flex-column justify-content-between pr-5"},Oo={class:"form-group"},jo=(0,r._)("h6",null,"Operador movil:",-1),Ro=(0,r._)("option",{selected:""},"Todos los operadores",-1),No=["value"],Uo=(0,r._)("small",{class:"form-text text-muted"},"Tus operadores de esta utlima carga.",-1),Wo={class:"form-group"},Lo=(0,r._)("h6",null,"Fecha de gestion:",-1),Vo=["disabled","min"],Bo={class:"form-text text-muted"},Po={class:"form-text text-muted"},Zo={class:"form-group"},$o=(0,r._)("h6",null,"Estado:",-1),Go={class:"options-states my-3 d-flex flex-column"},Ho={class:"form-check"},Yo=(0,r._)("label",{role:"button",class:"form-check-label",for:"deliveryCheck"}," Entregado ",-1),Ko={class:"form-check"},qo=(0,r._)("label",{role:"button",class:"form-check-label",for:"notDeliveryCheck"}," No Entregado ",-1),Jo={class:"form-check"},Xo=(0,r._)("label",{role:"button",class:"form-check-label",for:"partialCheck"}," Entrega Parcial ",-1),Qo={class:"form-group"},en=(0,r._)("h6",null,"Subestados:",-1),tn=(0,r._)("option",{selected:""},"Todos los Subestados",-1),an=(0,r._)("option",{selected:""},"Todos los Subestados",-1),sn=(0,r._)("option",{selected:""},"Todos los Subestados",-1),rn=[sn],on={class:"form-text text-muted"},nn={class:"form-text text-muted"},ln={class:"form-text text-muted"},cn={class:"form-text text-muted"},dn=(0,r._)("h6",null,"Cumplimiento:",-1),un={class:"options d-flex flex-column"},pn={class:"form-check"},hn=(0,r._)("label",{role:"button",class:"form-check-label",for:"inTimeCheck"}," A Tiempo ",-1),mn={class:"form-check"},gn=(0,r._)("label",{role:"button",class:"form-check-label",for:"aheadCheck"}," Adelantado ",-1),fn={class:"form-check"},vn=(0,r._)("label",{role:"button",class:"form-check-label",for:"backCheck"}," Atrasado ",-1),_n={class:"form-check"},bn=(0,r._)("label",{role:"button",class:"form-check-label",for:"notDefinedCheck"}," No Definido ",-1);function wn(e,t,a,o,n,l){const c=(0,r.up)("SpinnerText");return(0,r.wg)(),(0,r.iD)("div",zo,[(0,r._)("div",Oo,[jo,(0,r.wy)((0,r._)("select",{class:"form-control","onUpdate:modelValue":t[0]||(t[0]=t=>e.statistics.filter.operator=t)},[Ro,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.operators,(e=>((0,r.wg)(),(0,r.iD)("option",{key:e.id,value:e.id},(0,i.zw)(e.userName)+" ➜ "+(0,i.zw)(e.patent),9,No)))),128))],512),[[s.bM,e.statistics.filter.operator]]),Uo]),(0,r._)("div",Wo,[Lo,(0,r.wy)((0,r._)("input",{class:"form-control",disabled:l.dateNotFound,type:"date",min:n.firstManagementDate,"onUpdate:modelValue":t[1]||(t[1]=t=>e.statistics.filter.managementDate=t)},null,8,Vo),[[s.nr,e.statistics.filter.managementDate]]),(0,r.Wm)(c,{loading:n.loadingSpinner,classes:"form-text text-secondary",textLoading:"Cargando fecha"},null,8,["loading"]),(0,r.wy)((0,r._)("small",Bo,"Fecha de ultima gestion (todas las gestiones)",512),[[s.F8,l.dateFound]]),(0,r.wy)((0,r._)("small",Po,"Aun no hay fechas de gestion",512),[[s.F8,l.dateNotFound]])]),(0,r._)("div",Zo,[$o,(0,r._)("div",Go,[(0,r._)("div",Ho,[(0,r.wy)((0,r._)("input",{id:"deliveryCheck",checked:"",class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=t=>e.statistics.filter.status.Entregado=t)},null,512),[[s.e8,e.statistics.filter.status.Entregado]]),Yo]),(0,r._)("div",Ko,[(0,r.wy)((0,r._)("input",{id:"notDeliveryCheck",checked:"",onChange:t[3]||(t[3]=t=>e.statistics.filter.subStatus="Todos los Subestados"),class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=t=>e.statistics.filter.status["No Entregado"]=t)},null,544),[[s.e8,e.statistics.filter.status["No Entregado"]]]),qo]),(0,r._)("div",Jo,[(0,r.wy)((0,r._)("input",{id:"partialCheck",checked:"",onChange:t[5]||(t[5]=t=>e.statistics.filter.subStatus="Todos los Subestados"),class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=t=>e.statistics.filter.status["Entrega Parcial"]=t)},null,544),[[s.e8,e.statistics.filter.status["Entrega Parcial"]]]),Xo])])]),(0,r._)("div",Qo,[en,(0,r.wy)((0,r._)("select",{class:"form-control",type:"text","onUpdate:modelValue":t[7]||(t[7]=t=>e.statistics.filter.subStatus=t)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.SUB_STATUS["Entregado"],((e,t)=>((0,r.wg)(),(0,r.iD)("option",{key:t},(0,i.zw)(e),1)))),128))],512),[[s.F8,l.isOnlyChecked("Entregado")],[s.bM,e.statistics.filter.subStatus]]),(0,r.wy)((0,r._)("select",{class:"form-control",type:"text","onUpdate:modelValue":t[8]||(t[8]=t=>e.statistics.filter.subStatus=t)},[tn,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.SUB_STATUS["No Entregado"],((e,t)=>((0,r.wg)(),(0,r.iD)("option",{key:t},(0,i.zw)(e),1)))),128))],512),[[s.F8,l.isOnlyChecked("No Entregado")],[s.bM,e.statistics.filter.subStatus]]),(0,r.wy)((0,r._)("select",{class:"form-control",type:"text","onUpdate:modelValue":t[9]||(t[9]=t=>e.statistics.filter.subStatus=t)},[an,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.SUB_STATUS["Entrega Parcial"],((e,t)=>((0,r.wg)(),(0,r.iD)("option",{key:t},(0,i.zw)(e),1)))),128))],512),[[s.F8,l.isOnlyChecked("Entrega Parcial")],[s.bM,e.statistics.filter.subStatus]]),(0,r.wy)((0,r._)("select",{disabled:"",class:"form-control",type:"text","onUpdate:modelValue":t[10]||(t[10]=t=>e.statistics.filter.subStatus=t)},rn,512),[[s.F8,l.totalCheckedStatus>=2],[s.bM,e.statistics.filter.subStatus]]),(0,r.wy)((0,r._)("small",on,"Seleccionar un estado",512),[[s.F8,0==l.totalCheckedStatus]]),(0,r.wy)((0,r._)("small",nn,"'Entregado' no contiene subestados",512),[[s.F8,l.isOnlyChecked("Entregado")]]),(0,r.wy)((0,r._)("small",ln,"Subestados de 'No Entregado'",512),[[s.F8,l.isOnlyChecked("No Entregado")]]),(0,r.wy)((0,r._)("small",cn,"Subestados de 'Entrega Parcial'",512),[[s.F8,l.isOnlyChecked("Entrega Parcial")]])]),(0,r._)("div",null,[dn,(0,r._)("div",un,[(0,r._)("div",pn,[(0,r.wy)((0,r._)("input",{id:"inTimeCheck",checked:"",class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=t=>e.statistics.filter.compliance["A Tiempo"]=t)},null,512),[[s.e8,e.statistics.filter.compliance["A Tiempo"]]]),hn]),(0,r._)("div",mn,[(0,r.wy)((0,r._)("input",{id:"aheadCheck",checked:"",class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=t=>e.statistics.filter.compliance["Adelantado"]=t)},null,512),[[s.e8,e.statistics.filter.compliance["Adelantado"]]]),gn]),(0,r._)("div",fn,[(0,r.wy)((0,r._)("input",{id:"backCheck",checked:"",class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=t=>e.statistics.filter.compliance["Atrasado"]=t)},null,512),[[s.e8,e.statistics.filter.compliance["Atrasado"]]]),vn]),(0,r._)("div",_n,[(0,r.wy)((0,r._)("input",{id:"notDefinedCheck",checked:"",class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=t=>e.statistics.filter.compliance["No Definido"]=t)},null,512),[[s.e8,e.statistics.filter.compliance["No Definido"]]]),bn])])])])}const yn={class:"d-flex align-items-center"};function kn(e,t,a,s,o,n){return(0,r.wg)(),(0,r.iD)("div",yn,[(0,r._)("span",{class:(0,i.C_)(["spinner-border spinner-border-sm mx-1",a.loading?"":"d-none"]),role:"status","aria-hidden":"true"},null,2),(0,r._)("small",{class:(0,i.C_)(a.classes),style:(0,i.j5)(a.style)},(0,i.zw)(a.loading?a.textLoading:a.text),7)])}var xn={props:{loading:Boolean,text:String,textLoading:String,classes:String,style:Object}};const Dn=(0,u.Z)(xn,[["render",kn]]);var Sn=Dn,En={components:{SpinnerText:Sn},data(){return{loadingSpinner:!0,token:localStorage.getItem("token_user"),lastManagementDate:"",firstManagementDate:"",operators:[],SUB_STATUS:{"En Ruta":[],Entregado:[],"No Entregado":["TEL01: Local Cerrado","TEL02: Sin Dinero","TEL04: Ausente","TEL05: No hizo pedido","TEL06: Por precio de producto","TEL07: Direccion errada","TEL08: Vencimiento cercano","TEL09: Mercaderia deteriorada","TEL10: Asalto/Robo","TEL11: Fuera de horario","TEL12: Fallas Mecanicas","TEL13: Error de picking","TEL14: Falta de Tiempo","TEL15: Por cambios","TEL16: Exceso de Tiempo de Espera","TEL17: Error de Sistema","TEL18: Error de Geoposicion","TEL19: Error toma de pedido"],"Entrega Parcial":["TEL01: Error toma de pedido","TEL02: Por precio de producto","TEL03: Vencimiento cerano","TEL04: Mercaderia deteriorada","TEL05: Error de picking","TEL06: Por cambios"],"Devoluciones Programadas":["Recojo completo","Recojo parcial","Recojo no efectuado"]}}},computed:{...(0,n.rn)(["statistics"]),...(0,n.Se)(["getFilteredManaged"]),dateFound(){return this.statistics.filter.managementDate==this.lastManagementDate&&!this.loadingSpinner&&this.lastManagementDate},dateNotFound(){return!this.lastManagementDate&&!this.loadingSpinner},totalCheckedStatus(){let e=Object.values(this.statistics.filter.status),t=e.filter((e=>e));return t.length}},methods:{...(0,n.OI)(["setSomeStatisticsFilter"]),async getActiveOperators(){try{const e="http://srv515666.hstgr.cloud:4001/server-user/operators/A";let t=await fetch(e,{headers:{Authorization:"Bearer "+this.token}}),a=await t.json();if(a.error)throw a;return a}catch(e){let t=e.statusText||`Error de Front: Al obtener operadores activos: ${e}`;this.setAppError(t)}},async getManaged(){try{let e=await fetch("http://srv515666.hstgr.cloud:4001/server-user/managed/latest",{headers:{Authorization:"Bearer "+this.token}}),t=await e.json();if(t.error)throw t;return t}catch(e){let t=e.statusText||`Error de Front: Al obtener gestionados: ${e}`;this.setAppError(t)}},isOnlyChecked(e){return this.statistics.filter.status[e]&&1==this.totalCheckedStatus}},async mounted(){let e=await this.getManaged();if("undefined"==typeof e)return;if("success"==e.status){if(0==e.data.managed.length)this.lastManagementDate=null;else{let t=e.data.managed.map((e=>e.date));this.lastManagementDate=ka(ya(t)),this.setSomeStatisticsFilter({managementDate:this.lastManagementDate}),this.firstManagementDate=ka(wa(t))}this.loadingSpinner=!1}let t=await this.getActiveOperators();"undefined"!=typeof t&&"success"==t.status&&(this.operators=t.data.operators)}};const Cn=(0,u.Z)(En,[["render",wn]]);var An=Cn;const Tn={class:"container-map"},Fn={class:"my-2"},Mn={class:"my-0"},In={key:0,class:"mx-1 font-italic"};function zn(e,t,a,s,o,n){const l=(0,r.up)("MyComponent"),c=(0,r.up)("GMapInfoWindow"),d=(0,r.up)("GMapMarker"),u=(0,r.up)("GMapCluster"),p=(0,r.up)("GMapMap");return(0,r.wg)(),(0,r.iD)("div",Tn,[(0,r._)("div",Fn,[(0,r._)("h6",Mn,(0,i.zw)("Resultados obtenidos: "+n.results),1),n.results>0?((0,r.wg)(),(0,r.iD)("small",In,"Algunas gestiones no contienen con geolocalizacion")):(0,r.kq)("",!0)]),(0,r.Wm)(p,{center:o.center,zoom:5,"map-type-id":"terrain",style:{width:"100%",height:"80vh","flex-grow":"1"}},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{zoomOnClick:!0},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.getMarkers,((e,t)=>((0,r.wg)(),(0,r.j4)(d,{key:t,position:e.position,icon:e.icon,clickable:!0,draggable:!1,onClick:t=>o.center=e.position},{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r.Uk)((0,i.zw)(e.clientName)+" ",1),(0,r.Wm)(l)])])),_:2},1024)])),_:2},1032,["position","icon","onClick"])))),128))])),_:1})])),_:1},8,["center"])])}let On=a(2887),jn=a(2847),Rn=a(9887);var Nn={data(){return{center:{lat:-12.03600510418158,lng:-77.04066137432721}}},computed:{...(0,n.Se)(["getFilteredManaged"]),results(){return this.getFilteredManaged.length},getMarkers(){let e=this.getFilteredManaged.map((e=>({...e,position:{lat:Number(e.clientLatitude),lng:Number(e.clientLongitude)},icon:this.getIcon(e.status)})));return e}},methods:{getIcon(e){return"Entregado"==e?On:"Entrega Parcial"==e?jn:"No Entregado"==e?Rn:void 0}}};const Un=(0,u.Z)(Nn,[["render",zn],["__scopeId","data-v-2701657f"]]);var Wn=Un,Ln={name:"StatisticsGraphic",components:{GraphicFilter:An,GMap:Wn},data(){return{token:localStorage.getItem("token_user"),managed:[]}},methods:{...(0,n.OI)(["setStatisticsManaged","setStatiscticsActiveTab","setAppError"]),async getManaged(){try{let e=await fetch("http://srv515666.hstgr.cloud:4001/server-user/managed/latest",{headers:{Authorization:"Bearer "+this.token}}),t=await e.json();if(t.error)throw t;return t}catch(e){let t=e.statusText||`Error de Front: Al obtener gestionados: ${e}`;this.setAppError(t)}},getCompliance(e){return e.serviceTime==xa(e.date)?"A Tiempo":ba(e.serviceTime,xa(e.date))?"Adelantado":ba(xa(e.date),e.serviceTime)?"Atrasado":"No Definido"},addComplianceToManaged(e){let t=e.map((e=>({...e,compliance:this.getCompliance(e)})));return t}},async mounted(){this.setStatiscticsActiveTab("Mapa");let e=await this.getManaged();if("undefined"!=typeof e&&"success"==e.status){let t=this.addComplianceToManaged(e.data.managed);this.setStatisticsManaged(t),this.managed=t}}};const Vn=(0,u.Z)(Ln,[["render",Io],["__scopeId","data-v-5ada92ee"]]);var Bn=Vn;const Pn=e=>((0,r.dD)("data-v-31b9ea64"),e=e(),(0,r.Cn)(),e),Zn={class:"mt-3"},$n=Pn((()=>(0,r._)("hr",{class:"hr"},null,-1))),Gn=Pn((()=>(0,r._)("hr",{class:"hr"},null,-1)));function Hn(e,t,a,s,o,n){const i=(0,r.up)("DespatchRoute"),l=(0,r.up)("DeliveryEffect"),c=(0,r.up)("DespatchEffect");return(0,r.wg)(),(0,r.iD)("div",Zn,[(0,r.Wm)(i),$n,(0,r.Wm)(l),Gn,(0,r.Wm)(c)])}const Yn={class:"container-routes position-relative"},Kn=(0,r._)("h5",null,"Rutas",-1),qn={class:"d-flex justify-content-between mt-3"},Jn={class:"card text-center p-3",style:{width:"18rem"}},Xn=(0,r._)("div",{class:"card-body"},[(0,r._)("p",{class:"card-text"},"Total de rutas")],-1),Qn={class:"card text-center p-3",style:{width:"18rem"}},ei=(0,r._)("div",{class:"card-body"},[(0,r._)("p",{class:"card-text"},"Despaches promedio por ruta")],-1),ti=(0,r._)("div",{class:"card text-center p-3 text-muted",style:{width:"18rem"}},[(0,r._)("h2",null,"X"),(0,r._)("div",{class:"card-body"},[(0,r._)("p",{class:"card-text"},"Cumplimiento de planificacion por ruta")])],-1),ai={class:"card text-center p-3",style:{width:"18rem"}},si=(0,r._)("div",{class:"card-body"},[(0,r._)("p",{class:"card-text"},"Minimo de despachos por ruta")],-1),ri={class:"card text-center p-3",style:{width:"18rem"}},oi=(0,r._)("div",{class:"card-body"},[(0,r._)("p",{class:"card-text"},"Maximo de despachos por ruta")],-1);function ni(e,t,a,s,o,n){return(0,r.wg)(),(0,r.iD)("div",Yn,[Kn,(0,r._)("div",qn,[(0,r._)("div",Jn,[(0,r._)("h2",null,(0,i.zw)(n.totalRoutes),1),Xn]),(0,r._)("div",Qn,[(0,r._)("h2",null,(0,i.zw)(n.avgDespatchesPerRoute),1),ei]),ti,(0,r._)("div",ai,[(0,r._)("h2",null,(0,i.zw)(n.minDespatchesPerRoute),1),si]),(0,r._)("div",ri,[(0,r._)("h2",null,(0,i.zw)(n.maxDespatchesPerRoute),1),oi])])])}var ii={data(){return{token:localStorage.getItem("token_user"),routes:[]}},computed:{totalRoutes(){return this.routes.length},avgDespatchesPerRoute(){let e=this.routes.reduce(((e,t)=>e+t.totalDeliveries),0),t=e/this.totalRoutes;return t?t.toFixed(1):0},minDespatchesPerRoute(){let e=Math.min(...this.routes.map((e=>e.totalDeliveries)));return e&&e!==1/0&&e!==-1/0?e.toFixed(1):0},maxDespatchesPerRoute(){let e=Math.max(...this.routes.map((e=>e.totalDeliveries)));return e&&e!==1/0&&e!==-1/0?e.toFixed(1):0}},methods:{...(0,n.OI)(["setAppError"]),async getRoutes(){try{const e="http://srv515666.hstgr.cloud:4001/server-user/routes/latest";let t=await fetch(e,{headers:{Authorization:"Bearer "+this.token}}),a=await t.json();if(a.error)throw a;return a}catch(e){let t=e.statusText||`Error de Front: Al obtener rutas: ${e}`;this.setAppError(t)}}},async mounted(){let e=Ua(this.$loading,".container-routes"),t=await this.getRoutes();"undefined"!=typeof t&&"success"==t.status&&(this.routes=t.data.routes,e.hide())}};const li=(0,u.Z)(ii,[["render",ni]]);var ci=li;const di=e=>((0,r.dD)("data-v-b4dc1590"),e=e(),(0,r.Cn)(),e),ui={class:"delivery-effect mt-5"},pi=di((()=>(0,r._)("div",{class:"d-flex align-items-center"},[(0,r._)("h5",{class:"m-0"},"Entregas ·"),(0,r._)("h6",{role:"button",class:"m-0"},[(0,r._)("span",{class:"ml-2 badge badge-info font-weight-light"},"Mes actual")])],-1))),hi={class:"ml-2"},mi={class:"mt-3 d-flex justify-content-between"},gi={class:"d-flex w-100 justify-content-between"},fi={class:"w-25 mr-5"},vi=di((()=>(0,r._)("h6",null,"Efectividad Acumulada",-1))),_i={class:"w-75 container-table-history position-relative overflow-auto ml-5 align-self-start"},bi=di((()=>(0,r._)("h6",null,"Efectividad de Entregas",-1)));function wi(e,t,a,s,o,n){const i=(0,r.up)("AcumuladoChart"),l=(0,r.up)("HistoryTable"),c=(0,r.up)("EntregasChart");return(0,r.wg)(),(0,r.iD)("div",ui,[pi,(0,r._)("div",hi,[(0,r._)("div",mi,[(0,r._)("div",gi,[(0,r._)("div",fi,[vi,(0,r.Wm)(i)]),(0,r._)("div",_i,[(0,r.Wm)(l)])])]),(0,r._)("div",null,[bi,(0,r.Wm)(c)])])])}const yi=e=>((0,r.dD)("data-v-fa7d9646"),e=e(),(0,r.Cn)(),e),ki={class:"container-gauge position-relative d-flex flex-column"},xi=yi((()=>(0,r._)("div",{class:"gaugeArea align-self-start"},null,-1))),Di={class:"h4 porcentage position-absolute"};function Si(e,t,a,s,o,n){return(0,r.wg)(),(0,r.iD)("div",ki,[xi,(0,r._)("span",Di,(0,i.zw)(n.getAcumuladoChartValue)+"%",1)])}var Ei=a(1954),Ci={data(){return{gaugeOptions:{hasNeedle:!1,needleColor:"gray",needleUpdateSpeed:1e3,arcColors:["#27CE09","lightgray"],rangeLabel:["0","100"],arcDelimiters:[0]}}},computed:{...(0,n.rn)(["statistics"]),getAcumuladoChartValue(){let e=0;for(const t of this.statistics.history)e+=Number(this.efect(t));return e.toFixed(2)}},methods:{...(0,n.OI)(["setAppError"]),efect(e){let t=(100*e.tracking.reduce(((e,t)=>e+t.managed.delivered),0)/e.tracking.reduce(((e,t)=>e+t.info.assigned),0)).toFixed(2);return t}},mounted(){try{this.gaugeOptions.arcDelimiters=[0==this.getAcumuladoChartValue?.5:this.getAcumuladoChartValue],document.querySelector(".gaugeArea").innerHTML="",(0,Ei.gaugeChart)(document.querySelector(".gaugeArea"),300,this.gaugeOptions).updateNeedle(this.getAcumuladoChartValue)}catch(e){let t=`Error al obtener datos para el grafico circular: ${e}`;this.setAppError(t)}}};const Ai=(0,u.Z)(Ci,[["render",Si],["__scopeId","data-v-fa7d9646"]]);var Ti=Ai;const Fi={class:"table"},Mi=(0,r._)("thead",{class:"thead-dark"},[(0,r._)("tr",null,[(0,r._)("th",{scope:"col"},"Fecha de carga"),(0,r._)("th",{scope:"col"},"Asignados"),(0,r._)("th",{scope:"col"},"Entregado"),(0,r._)("th",{scope:"col"},"Parcial"),(0,r._)("th",{scope:"col"},"N.Entregado"),(0,r._)("th",{scope:"col"},"Efect. %")])],-1);function Ii(e,t,a,s,o,n){return(0,r.wg)(),(0,r.iD)("table",Fi,[Mi,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.statistics.history,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.date},[(0,r._)("td",null,(0,i.zw)(e.date),1),(0,r._)("td",null,(0,i.zw)(n.assigneds(e)),1),(0,r._)("td",null,(0,i.zw)(n.delivereds(e)),1),(0,r._)("td",null,(0,i.zw)(n.partials(e)),1),(0,r._)("td",null,(0,i.zw)(n.notDelivereds(e)),1),(0,r._)("td",null,(0,i.zw)(n.efect(e))+"%",1)])))),128))])])}var zi={computed:{...(0,n.rn)(["statistics"])},methods:{assigneds(e){let t=e.tracking.reduce(((e,t)=>e+t.info.assigned),0);return t},delivereds(e){let t=e.tracking.reduce(((e,t)=>e+t.managed.delivered),0);return t},partials(e){let t=e.tracking.reduce(((e,t)=>e+t.managed.partial),0);return t},notDelivereds(e){let t=e.tracking.reduce(((e,t)=>e+t.managed.notDelivered),0);return t},efect(e){let t=(100*e.tracking.reduce(((e,t)=>e+t.managed.delivered),0)/e.tracking.reduce(((e,t)=>e+t.info.assigned),0)).toFixed(2);return t}}};const Oi=(0,u.Z)(zi,[["render",Ii]]);var ji=Oi;function Ri(e,t,a,s,o,n){const i=(0,r.up)("Line");return(0,r.wg)(),(0,r.j4)(i,{"css-classes":"container-line-chart position-relative",styles:{width:"100%"},height:"150","chart-id":"bar-chart","dataset-id-key":a.datasetIdKey,"chart-options":o.chartOptions,"chart-data":{labels:n.getDays,datasets:n.getDataSets},plugins:{}},null,8,["dataset-id-key","chart-options","chart-data"])}var Ni=a(6294),Ui=a(5140);Ui.kL.register(Ui.Dx,Ui.u,Ui.De,Ui.jn,Ui.uw,Ui.f$,Ui.od);var Wi={components:{Line:Ni.x1},props:{datasetIdKey:{type:String,default:"label"}},data(){return{chartOptions:{responsive:!0}}},computed:{...(0,n.rn)(["statistics"]),getDays(){let e=(new Date).toISOString().split("T")[0].split("-"),t=new Date(e[0],e[1],0).getDate(),a=[];for(let s=1;s<=t;s++)a.push(s);return a},getDataSets(){return[{label:"Efectividad / Dia",backgroundColor:"#f87979",data:this.getDaysData()}]}},methods:{...(0,n.OI)(["setAppError"]),getDaysData(){let e=[];for(const t of this.getDays)e.push(this.getDayData(t));return e},getDayData(e){for(const t of this.statistics.history){let a=this.getOnlyDayFromHistDate(t);if(a==e){let e=Number(this.efect(t));return e}}return null},getOnlyDayFromHistDate(e){let t=e.date.split(" ")[0],a=t.split("-")[2];return Number(a)},efect(e){let t=(100*e.tracking.reduce(((e,t)=>e+t.managed.delivered),0)/e.tracking.reduce(((e,t)=>e+t.info.assigned),0)).toFixed(2);return t}}};const Li=(0,u.Z)(Wi,[["render",Ri]]);var Vi=Li,Bi={components:{AcumuladoChart:Ti,HistoryTable:ji,EntregasChart:Vi}};const Pi=(0,u.Z)(Bi,[["render",wi],["__scopeId","data-v-b4dc1590"]]);var Zi=Pi;const $i={class:"despatches my-5"},Gi=(0,r._)("div",{class:"d-flex align-items-center"},[(0,r._)("h5",{class:"m-0"},"Despachos ·"),(0,r._)("h6",{role:"button",class:"m-0"},[(0,r._)("span",{class:"ml-2 badge badge-info font-weight-light"},"Semana actual")])],-1),Hi={class:"ml-2"},Yi={class:"mt-3"},Ki=(0,r._)("h6",null,"Cantidad de despachos por dia",-1),qi=(0,r.uE)('<div class="mt-5"><h6>Total de despachos</h6><span class="mx-2"> Los graficos a continuacion visualizan datos de todos los despachos entregados y estimados en el rango de fecha seleccionada.</span><br><br><div class="container-total-despatch position-relative w-50 m-auto"><h6>Numero de despachos por sub-estado</h6><div class="d-flex w-100 justify-content-between align-items-center mt-4"><span>100 sin subEstado (100.0%)</span><div class="bg-success p-3 w-75"></div></div></div></div>',1);function Ji(e,t,a,s,o,n){const i=(0,r.up)("DespachosChart");return(0,r.wg)(),(0,r.iD)("div",$i,[Gi,(0,r._)("div",Hi,[(0,r._)("div",Yi,[Ki,(0,r.Wm)(i)]),qi])])}function Xi(e,t,a,s,o,n){const i=(0,r.up)("Bar");return(0,r.wg)(),(0,r.j4)(i,{"chart-options":o.chartOptions,"chart-data":o.chartData,"chart-id":"bar-chart","dataset-id-key":a.datasetIdKey,plugins:{},"css-classes":"container-bar-chart position-relative",styles:{width:"100%"},height:"150"},null,8,["chart-options","chart-data","dataset-id-key"])}Ui.kL.register(Ui.Dx,Ui.u,Ui.De,Ui.ZL,Ui.uw,Ui.f$);var Qi={components:{Bar:Ni.$Q},props:{datasetIdKey:{type:String,default:"label"}},data(){return{chartData:{labels:["Domingo","Lunes","Martes","Miercoles","Jueves","Virnes","Sabado"],datasets:[]},chartOptions:{responsive:!0}}},mounted(){try{let e=_a(new Date(2021,11,26));console.log("Numero de semana actual: ",e),this.chartData.datasets=[{label:"Entregados",backgroundColor:"#28a745",data:[5,10,15,20,25,30,24]},{label:"Parciales",backgroundColor:"#ffc107",data:[5,10,15,20,25,30,20]},{label:"No Entregados",backgroundColor:"#dc3545",data:[5,10,15,20,25,30,20]}]}catch(e){let t=`Error de Front: Al montar el grafio de lineas: ${e}`;this.setAppError(t)}}};const el=(0,u.Z)(Qi,[["render",Xi]]);var tl=el,al={components:{DespachosChart:tl}};const sl=(0,u.Z)(al,[["render",Ji]]);var rl=sl,ol={name:"StatisticsDespatch",components:{DespatchRoute:ci,DeliveryEffect:Zi,DespatchEffect:rl},data(){return{token:localStorage.getItem("token_user")}},methods:{...(0,n.OI)(["setStatisticsHistory","setStatiscticsActiveTab","setAppError"]),async getHistory(){try{let e=await fetch("http://srv515666.hstgr.cloud:4001/server-user/history",{headers:{Authorization:"Bearer "+this.token}}),t=await e.json();if(t.error)throw t;return t}catch(e){let t=e.statusText||`Error de Front: Al obtener historial de tracking: ${e}`;this.setAppError(t)}}},async mounted(){this.setStatiscticsActiveTab("Despachos");let e=Ua(this.$loading,".container-table-history"),t=Ua(this.$loading,".container-gauge"),a=Ua(this.$loading,".container-line-chart"),s=Ua(this.$loading,".container-bar-chart"),r=Ua(this.$loading,".container-total-despatch"),o=await this.getHistory();"undefined"!=typeof o&&"success"==o.status&&(this.setStatisticsHistory(o.data.history),t.hide(),e.hide(),a.hide(),s.hide,r.hide)}};const nl=(0,u.Z)(ol,[["render",Hn],["__scopeId","data-v-31b9ea64"]]);var il=nl;const ll={class:"container"},cl={class:"bg-light"},dl={class:"nav nav-tabs"},ul={class:"nav-item"},pl=(0,r.Uk)("Tabla"),hl={class:"nav-item"},ml=(0,r.Uk)("Mapa"),gl={class:"container-statistics overflow-auto p-3"};function fl(e,t,a,s,o,n){const l=(0,r.up)("RowBack"),c=(0,r.up)("router-link"),d=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",ll,[(0,r.Wm)(l,{pageName:"tracking"}),(0,r._)("div",cl,[(0,r._)("ul",dl,[(0,r._)("li",ul,[(0,r.Wm)(c,{class:(0,i.C_)([{active:"Tabla"==e.routes.activeTab},"nav-link"]),to:{name:"routes-table"}},{default:(0,r.w5)((()=>[pl])),_:1},8,["class"])]),(0,r._)("li",hl,[(0,r.Wm)(c,{class:(0,i.C_)([{active:"Mapa"==e.routes.activeTab},"nav-link"]),to:{name:"routes-graphic"}},{default:(0,r.w5)((()=>[ml])),_:1},8,["class"])])])]),(0,r._)("div",gl,[(0,r.Wm)(d)])])}var vl={components:{RowBack:ss},computed:{...(0,n.rn)(["routes"])}};const _l=(0,u.Z)(vl,[["render",fl]]);var bl=_l;const wl={class:"container-route d-flex mt-4 justify-content-between"},yl={class:"w-75"},kl={class:"overflow-auto container-table-routes position-relative align-self-start mt-3"};function xl(e,t,a,s,o,n){const i=(0,r.up)("RouteFilter"),l=(0,r.up)("TopTableRoute"),c=(0,r.up)("RoutesTable");return(0,r.wg)(),(0,r.iD)("div",wl,[(0,r.Wm)(i),(0,r._)("div",yl,[(0,r.Wm)(l),(0,r._)("div",kl,[(0,r.Wm)(c)])])])}const Dl={class:"d-flex flex-column justify-content-between pr-5"},Sl={class:"form-group"},El=(0,r._)("h6",null,"Fecha de carga:",-1),Cl=["disabled","min"],Al={class:"form-text text-muted"},Tl={class:"form-text text-muted"},Fl={class:"form-group"},Ml=(0,r._)("h6",null,"Operador movil:",-1),Il=(0,r._)("option",{selected:""},"Todos los operadores",-1),zl=(0,r._)("small",{class:"form-text text-muted"},"Todos tus operadores.",-1),Ol={class:"form-group"},jl=(0,r._)("h6",null,"Centros de despachos:",-1),Rl=(0,r._)("option",{selected:""},"Todos los centros",-1),Nl=(0,r._)("small",{class:"form-text text-muted"},"Tus grupos de trabajo.",-1);function Ul(e,t,a,o,n,l){const c=(0,r.up)("SpinnerText");return(0,r.wg)(),(0,r.iD)("div",Dl,[(0,r._)("div",Sl,[El,(0,r.wy)((0,r._)("input",{onChange:t[0]||(t[0]=(...t)=>e.getRoutesFromAPI&&e.getRoutesFromAPI(...t)),disabled:l.dateNotFound,class:"form-control",type:"date",min:n.firstLoadDate,"onUpdate:modelValue":t[1]||(t[1]=t=>e.routes.filter.loadDate=t)},null,40,Cl),[[s.nr,e.routes.filter.loadDate]]),(0,r.Wm)(c,{loading:n.loadingSpinner,classes:"form-text text-secondary",textLoading:"Cargando fecha"},null,8,["loading"]),(0,r.wy)((0,r._)("small",Al,"Fecha de ultima carga",512),[[s.F8,l.dateFound]]),(0,r.wy)((0,r._)("small",Tl,"Aun no hay fechas de carga",512),[[s.F8,l.dateNotFound]])]),(0,r._)("div",Fl,[Ml,(0,r.wy)((0,r._)("select",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=t=>e.routes.filter.operator=t)},[Il,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.operators,(e=>((0,r.wg)(),(0,r.iD)("option",{key:e.id},(0,i.zw)(e.userName),1)))),128))],512),[[s.bM,e.routes.filter.operator]]),zl]),(0,r._)("div",Ol,[jl,(0,r.wy)((0,r._)("select",{class:"form-control","onUpdate:modelValue":t[3]||(t[3]=t=>e.routes.filter.center=t)},[Rl,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.groups,(e=>((0,r.wg)(),(0,r.iD)("option",{key:e.id},(0,i.zw)(e.name),1)))),128))],512),[[s.bM,e.routes.filter.center]]),Nl])])}var Wl={components:{SpinnerText:Sn},data(){return{loadingSpinner:!0,token:localStorage.getItem("token_user"),lastLoadDate:"",firstLoadDate:"",operators:[],groups:[]}},computed:{...(0,n.rn)(["routes"]),dateFound(){return this.routes.filter.loadDate==this.lastLoadDate&&!this.loadingSpinner&&this.lastLoadDate},dateNotFound(){return!this.lastLoadDate&&!this.loadingSpinner}},methods:{...(0,n.OI)(["setAppError","setSomeRouteFilter"]),...(0,n.nv)(["getRoutesFromAPI"]),async getLoad(e){try{let t=await fetch(`http://srv515666.hstgr.cloud:4001/server-user/loads/${e}`,{headers:{Authorization:"Bearer "+this.token}}),a=await t.json();if(a.error)throw a;return a}catch(t){let e=t.statusText||"Error de Front: Al obtener fecha ultima de importacion";this.setAppError(e)}},async getOperators(){try{const e="http://srv515666.hstgr.cloud:4001/server-user/operators";let t=await fetch(e,{headers:{Authorization:"Bearer "+this.token}}),a=await t.json();if(a.error)throw a;return a}catch(e){let t=e.statusText||"Error de Front: Al obtener operadores para filtro";this.setAppError(t)}},async getGroups(){try{const e="http://srv515666.hstgr.cloud:4001/server-user/groups";let t=await fetch(e,{headers:{Authorization:"Bearer "+this.token}}),a=await t.json();if(a.error)throw a;return a}catch(e){let t=e.statusText||"Error de Front: Al obtener grupos/centros para filtro";this.setAppError(t)}}},async mounted(){let e=await this.getLoad("latest");if("undefined"==typeof e)return;"success"==e.status&&(this.lastLoadDate=ka(e.data.load.date),this.setSomeRouteFilter({loadDate:this.lastLoadDate})),this.loadingSpinner=!1;let t=await this.getLoad("first");if("undefined"==typeof t)return;"success"==t.status&&(this.firstLoadDate=ka(t.data.load.date));let a=await this.getOperators();if("undefined"==typeof a)return;"success"==a.status&&(this.operators=a.data.operators);let s=await this.getGroups();"undefined"!=typeof s&&"success"==s.status&&(this.groups=s.data.groups)}};const Ll=(0,u.Z)(Wl,[["render",Ul]]);var Vl=Ll;const Bl=(0,r.uE)('<div class="d-flex justify-content-between align-items-center pb-2 border-bottom"><h4 class="font-weight-normal">Rutas</h4><div><button class="btn border">Asignar a ruta</button><button class="btn btn-primary mx-2"><i class="fa-solid fa-upload mx-1"></i> Importar </button><button class="btn btn-warning text-white">Nueva ruta</button></div></div><button class="btn border mt-3" data-toggle="modal" data-target="#routeActions"> Acciones </button>',2);function Pl(e,t,a,s,o,n){const i=(0,r.up)("RouteActionsModal");return(0,r.wg)(),(0,r.iD)("div",null,[Bl,(0,r.Wm)(i)])}const Zl={class:"modal fade",id:"routeActions",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},$l=(0,r._)("div",{class:"modal-dialog modal-sm modal-dialog-centered",role:"document"},[(0,r._)("div",{class:"modal-content"},[(0,r._)("div",{class:"modal-body"},[(0,r._)("p",{role:"button","data-toggle":"modal","data-target":"#createRoute"}," Iniciar ruta "),(0,r._)("p",{role:"button","data-toggle":"modal","data-target":"#updateRoute"}," Finalizar ruta "),(0,r._)("p",{role:"button","data-toggle":"modal","data-target":"#deleteRoute"}," Eliminar ruta ")])])],-1);function Gl(e,t,a,s,o,n){const i=(0,r.up)("ConfirmCreateRouteModal"),l=(0,r.up)("ConfirmUpdateRouteModal"),c=(0,r.up)("ConfirmDeleteRouteModal");return(0,r.wg)(),(0,r.iD)("div",Zl,[$l,(0,r.Wm)(i),(0,r.Wm)(l),(0,r.Wm)(c)])}const Hl={class:"modal fade",id:"createRoute",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},Yl={class:"modal-dialog modal-dialog-centered",role:"document"},Kl={class:"alert alert-primary modal-content"},ql=(0,r._)("div",{class:"modal-body"},[(0,r._)("h5",{class:""},"¿Desea iniciar ruta?"),(0,r._)("span",null,"Se habilitara el acceso a la gestion mobil.")],-1),Jl={class:"modal-footer d-flex justify-content-evenly"},Xl=(0,r._)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Cancelar ",-1);function Ql(e,t,a,s,o,n){const i=(0,r.up)("SpinnerButton");return(0,r.wg)(),(0,r.iD)("div",Hl,[(0,r._)("div",Yl,[(0,r._)("div",Kl,[ql,(0,r._)("div",Jl,[(0,r.Wm)(i,{"data-dismiss":"modal",onClick:n.createRoute,classes:"rounded btn-primary",loading:o.loadingSpinner,text:"Iniciar",textLoading:"Iniciando"},null,8,["onClick","loading"]),Xl])])])])}var ec={components:{SpinnerButton:fa},data(){return{loadingSpinner:!1}},methods:{createRoute(){}}};const tc=(0,u.Z)(ec,[["render",Ql]]);var ac=tc;const sc={class:"modal fade",id:"updateRoute",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},rc={class:"modal-dialog modal-dialog-centered",role:"document"},oc={class:"alert alert-info modal-content"},nc=(0,r._)("div",{class:"modal-body"},[(0,r._)("h5",{class:""},"¿Desea finalizar esta ruta?"),(0,r._)("span",null,"Se perdera el acceso a la gestion mobil.")],-1),ic={class:"modal-footer d-flex justify-content-evenly"},lc=(0,r._)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Cancelar ",-1);function cc(e,t,a,s,o,n){const i=(0,r.up)("SpinnerButton");return(0,r.wg)(),(0,r.iD)("div",sc,[(0,r._)("div",rc,[(0,r._)("div",oc,[nc,(0,r._)("div",ic,[(0,r.Wm)(i,{"data-dismiss":"modal",onClick:n.updateRoute,classes:"runded btn-info",loading:o.loadingSpinner,text:"Finalizar",textLoading:"Finalizando"},null,8,["onClick","loading"]),lc])])])])}var dc={components:{SpinnerButton:fa},data(){return{loadingSpinner:!1}},methods:{updateRoute(){}}};const uc=(0,u.Z)(dc,[["render",cc]]);var pc=uc;const hc={class:"modal fade",id:"deleteRoute",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},mc={class:"modal-dialog modal-dialog-centered",role:"document"},gc={class:"alert alert-danger modal-content"},fc=(0,r._)("div",{class:"modal-body"},[(0,r._)("h5",{class:""},"¿Desea eliminar esta ruta?"),(0,r._)("span",null,"La ruta se eliminara por completo. Accion no reversible.")],-1),vc={class:"modal-footer d-flex justify-content-evenly"},_c=(0,r._)("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Cancelar ",-1);function bc(e,t,a,s,o,n){const i=(0,r.up)("SpinnerButton");return(0,r.wg)(),(0,r.iD)("div",hc,[(0,r._)("div",mc,[(0,r._)("div",gc,[fc,(0,r._)("div",vc,[(0,r.Wm)(i,{"data-dismiss":"modal",onClick:n.deleteRoute,classes:"rounded btn-danger border-0",loading:o.loadingSpinner,text:"Eliminar",textLoading:"Eliminando"},null,8,["onClick","loading"]),_c])])])])}var wc={components:{SpinnerButton:fa},data(){return{loadingSpinner:!1}},methods:{deleteRoute(){}}};const yc=(0,u.Z)(wc,[["render",bc]]);var kc=yc,xc={components:{ConfirmCreateRouteModal:ac,ConfirmUpdateRouteModal:pc,ConfirmDeleteRouteModal:kc}};const Dc=(0,u.Z)(xc,[["render",Gl]]);var Sc=Dc,Ec={components:{RouteActionsModal:Sc}};const Cc=(0,u.Z)(Ec,[["render",Pl]]);var Ac=Cc;const Tc=e=>((0,r.dD)("data-v-066a672c"),e=e(),(0,r.Cn)(),e),Fc={class:"table"},Mc={class:"thead-white"},Ic={scope:"col",class:"col-2 font-weight-normal"},zc={class:"form-check"},Oc=Tc((()=>(0,r._)("label",{class:"form-check-label"}," Vehiculo ",-1))),jc=Tc((()=>(0,r._)("th",{scope:"col",class:"font-weight-normal"},"Usuario",-1))),Rc=Tc((()=>(0,r._)("th",{scope:"col",class:"font-weight-normal"},"Estado",-1))),Nc=Tc((()=>(0,r._)("th",{scope:"col",class:"font-weight-normal"},"Despachos",-1))),Uc=Tc((()=>(0,r._)("th",{scope:"col",class:"font-weight-normal"},"Fecha despacho",-1))),Wc=Tc((()=>(0,r._)("th",{scope:"col",class:"font-weight-normal"},"Hora inicio",-1))),Lc=Tc((()=>(0,r._)("th",{scope:"col",class:"font-weight-normal"},"Fecha de carga",-1))),Vc={class:"border-right"},Bc={class:"form-check"},Pc={class:"font-weight-light"},Zc={class:"text-muted"},$c={class:"text-muted"},Gc={class:"text-muted text-center"},Hc={class:"text-muted"},Yc={class:"text-muted"},Kc={class:"text-muted"};function qc(e,t,a,s,o,n){return(0,r.wg)(),(0,r.iD)("table",Fc,[(0,r._)("thead",Mc,[(0,r._)("tr",null,[(0,r._)("th",Ic,[(0,r._)("div",zc,[(0,r._)("input",{onChange:t[0]||(t[0]=(...e)=>n.checkVehicles&&n.checkVehicles(...e)),ref:"checkboxAll",class:"form-check-input form-check-input-lg",type:"checkbox"},null,544),Oc])]),jc,Rc,Nc,Uc,Wc,Lc])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.getFilteredRoutes,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.patent},[(0,r._)("td",Vc,[(0,r._)("div",Bc,[(0,r._)("input",{ref_for:!0,ref:"checkbox",class:"form-check-input form-check-input-lg",type:"checkbox"},null,512),(0,r._)("label",Pc,(0,i.zw)(e.patent),1)])]),(0,r._)("td",Zc,(0,i.zw)(e.userName),1),(0,r._)("td",$c,(0,i.zw)(e.status),1),(0,r._)("td",Gc,(0,i.zw)(e.totalDeliveries),1),(0,r._)("td",Hc,(0,i.zw)(n.onlyDate(e.date)),1),(0,r._)("td",Yc,(0,i.zw)(n.onlyTime(e.date)),1),(0,r._)("td",Kc,(0,i.zw)(e.loadDate),1)])))),128))])])}var Jc={computed:{...(0,n.Se)(["getFilteredRoutes"])},methods:{onlyDate(e){let t=e.split(" ")[0];return t},onlyTime(e){let t=e.split(" ")[1];return t},checkAll(){this.$refs.checkbox.forEach((e=>e.checked=!0))},unCheckAll(){this.$refs.checkbox.forEach((e=>e.checked=!1))},checkVehicles(){this.$refs.checkboxAll.checked?this.checkAll():this.unCheckAll()}}};const Xc=(0,u.Z)(Jc,[["render",qc],["__scopeId","data-v-066a672c"]]);var Qc=Xc,ed={components:{RouteFilter:Vl,TopTableRoute:Ac,RoutesTable:Qc},data(){return{token:localStorage.getItem("token_user")}},computed:{...(0,n.rn)(["route"])},methods:{...(0,n.OI)(["setAppError","setRoutesData","setRoutesActiveTab"]),async getRoutes(){try{const e="http://srv515666.hstgr.cloud:4001/server-user/routes/latest";let t=await fetch(e,{headers:{Authorization:"Bearer "+this.token}}),a=await t.json();if(a.error)throw a;return a}catch(e){let t=e.statusText||`Error de Front: Al obtener rutas: ${e}`;this.setAppError(t)}}},async mounted(){let e=Ua(this.$loading,".container-table-routes");this.setRoutesActiveTab("Tabla");let t=await this.getRoutes();"undefined"!=typeof t&&"success"==t.status&&(this.setRoutesData(t.data.routes),e.hide())}};const td=(0,u.Z)(ed,[["render",xl]]);var ad=td;function sd(e,t,a,s,o,n){return(0,r.wg)(),(0,r.iD)("div")}var rd={methods:{...(0,n.OI)(["setRoutesActiveTab"])},mounted(){this.setRoutesActiveTab("Mapa")}};const od=(0,u.Z)(rd,[["render",sd]]);var nd=od;const id=[{path:"/",name:"login",component:C},{path:"/tracking",name:"tracking",component:Va},{path:"/config",name:"config",component:ns,children:[{path:"",name:"",component:Ns},{path:"groups",name:"groups",component:Ns},{path:"vehicles",name:"vehicles",component:_r},{path:"operators",name:"operators",component:vo}]},{path:"/statistics",name:"statistics",component:To,children:[{path:"",name:"",component:Bn},{path:"graphic",name:"graphic",component:Bn},{path:"despatch",name:"despatch",component:il}]},{path:"/routes",name:"routes",component:bl,children:[{path:"",name:"",component:ad},{path:"routes-table",name:"routes-table",component:ad},{path:"routes-graphic",name:"routes-graphic",component:nd}]}],ld=(0,v.p7)({history:(0,v.PO)("/general/"),routes:id});var cd=ld,dd=(0,n.MT)({state:{appError:"",libs:{stepper:{stepActual:1,titles:[],pastSteps:[],stepError:null}},routes:{activeTab:"Tabla",filter:{loadDate:"",operator:"Todos los operadores",center:"Todos los centros"},data:[]},statistics:{activeTab:"Mapa",filter:{operator:"Todos los operadores",managementDate:"",status:{Entregado:!0,"No Entregado":!0,"Entrega Parcial":!0},subStatus:"Todos los Subestados",compliance:{"A Tiempo":!0,Adelantado:!0,Atrasado:!0,"No Definido":!0}},managed:[],history:[]},config:{activeTab:"Grupos"}},getters:{getFilteredManaged(e){let t=e.statistics.managed,a=e.statistics.filter.operator,s=e.statistics.filter.managementDate,r=e.statistics.filter.status,o=e.statistics.filter.subStatus,n=e.statistics.filter.compliance;return t="Todos los operadores"==a?t.filter((e=>e.operatorId)):t.filter((e=>e.operatorId==a)),t=t.filter((e=>e.date.split(" ")[0]==s)),t=t.filter((e=>r[e.status])),t="Todos los Subestados"==o?t.filter((e=>e.subStatus)):t.filter((e=>e.subStatus==o)),t=t.filter((e=>n[e.compliance])),t},getFilteredRoutes(e){let t=e.routes.data,a=e.routes.filter.operator,s=e.routes.filter.center;return t="Todos los operadores"==a?t.filter((e=>e.userName)):t.filter((e=>e.userName==a)),t="Todos los centros"==s?t.filter((e=>e.group)):t.filter((e=>e.group==s)),t},getStepper(e){return e.libs.stepper}},mutations:{setAppError(e,t){e.appError=t},setSomeRouteFilter(e,t){let a=e.routes.filter;for(const s in t)a[s]=t[s]},setRoutesData(e,t){e.routes.data=t},setRoutesActiveTab(e,t){e.routes.activeTab=t},setStatisticsManaged(e,t){e.statistics.managed=t},setStatisticsHistory(e,t){e.statistics.history=t},setStatiscticsActiveTab(e,t){e.statistics.activeTab=t},setSomeStatisticsFilter(e,t){let a=e.statistics.filter;for(const s in t)a[s]=t[s]},setConfigActiveTab(e,t){e.config.activeTab=t},setStepperTitle(e,t){e.libs.stepper.titles.push(t)},setStepperPast(e,t){e.libs.stepper.pastSteps.push(t)},setSomeStepper(e,{field:t,value:a}){e.libs.stepper[t]=a}},actions:{resetStepper(e){e.commit("setSomeStepper",{field:"stepActual",value:1}),e.commit("setSomeStepper",{field:"stepError",value:null}),e.commit("setSomeStepper",{field:"contentError",value:null}),e.commit("setSomeStepper",{field:"pastSteps",value:[]})},async getRoutesFromAPI({commit:e}){try{const t=`http://srv515666.hstgr.cloud:4001/server-user/routes/${this.state.routes.filter.loadDate}`;let a=await fetch(t,{headers:{Authorization:"Bearer "+localStorage.getItem("token_user")}}),s=await a.json();if(s.error)throw s;e("setRoutesData",s.data.routes)}catch(t){let e=t.statusText||`Error de Front: Al obtener rutas: ${t}`;this.setAppError(e)}}},modules:{}}),ud=(a(3455),a(3752)),pd=a.n(ud),hd=a(7038);(0,s.ri)(f).use(dd).use(cd).use(pd()).use(hd.ZP,{load:{key:"AIzaSyCdbC0mLnixshOoaRr_dhP3e9xvhRw2pdU"}}).mount("#app")},2887:function(e,t,a){e.exports=a.p+"img/delivered.6914a6c6.svg"},9887:function(e,t,a){e.exports=a.p+"img/notDelivered.e7df9e5e.svg"},2847:function(e,t,a){e.exports=a.p+"img/partial.980732b3.svg"}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,s,r,o){if(!s){var n=1/0;for(d=0;d<e.length;d++){s=e[d][0],r=e[d][1],o=e[d][2];for(var i=!0,l=0;l<s.length;l++)(!1&o||n>=o)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(i=!1,o<n&&(n=o));if(i){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,r,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/general/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,o,n=s[0],i=s[1],l=s[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(l)var d=l(a)}for(t&&t(s);c<n.length;c++)o=n[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},s=self["webpackChunkapalworkflow"]=self["webpackChunkapalworkflow"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(7173)}));s=a.O(s)})();
//# sourceMappingURL=app.fa5d915b.js.map